<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ADHDè‡ªæµ‹é‡è¡¨ - Reactç‰ˆ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // æµ‹è¯•é¢˜ç›®æ•°æ®
      const testData = {
        children: [
          // æ³¨æ„åŠ›ä¸é›†ä¸­ç—‡çŠ¶ (1-9)
          {
            text: "å­©å­åœ¨å­¦ä¹ ã€å·¥ä½œæˆ–å…¶ä»–æ´»åŠ¨ä¸­ï¼Œç»å¸¸æ— æ³•æ³¨æ„åˆ°ç»†èŠ‚æˆ–å› ç²—å¿ƒè€ŒçŠ¯é”™",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­åœ¨åšåŠŸè¯¾æˆ–æ¸¸æˆæ—¶ï¼Œç»å¸¸éš¾ä»¥ä¿æŒæ³¨æ„åŠ›",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "åˆ«äººå¯¹å­©å­è¯´è¯æ—¶ï¼Œå­©å­ç»å¸¸çœ‹èµ·æ¥æ²¡åœ¨å¬",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸ä¸èƒ½æŒ‰ç…§æŒ‡ä»¤å®ŒæˆåŠŸè¯¾ã€å®¶åŠ¡æˆ–å·¥ä½œèŒè´£",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸åœ¨ç»„ç»‡ä»»åŠ¡å’Œæ´»åŠ¨æ–¹é¢æœ‰å›°éš¾",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸å›é¿ã€ä¸å–œæ¬¢æˆ–ä¸æ„¿æ„å‚åŠ éœ€è¦æŒç»­ç²¾ç¥åŠªåŠ›çš„ä»»åŠ¡",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸é—å¤±ä»»åŠ¡æˆ–æ´»åŠ¨æ‰€éœ€çš„ç‰©å“",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸å®¹æ˜“è¢«å¤–ç•Œåˆºæ¿€åˆ†æ•£æ³¨æ„åŠ›",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­åœ¨æ—¥å¸¸æ´»åŠ¨ä¸­ç»å¸¸å¥å¿˜",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          // å¤šåŠ¨å†²åŠ¨ç—‡çŠ¶ (10-18)
          {
            text: "å­©å­ç»å¸¸æ‰‹è„šåŠ¨ä¸ªä¸åœæˆ–åœ¨åº§ä½ä¸Šæ‰­æ¥æ‰­å»",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "åœ¨éœ€è¦ä¿æŒåç€çš„åœºåˆï¼Œå­©å­ç»å¸¸ç¦»å¼€åº§ä½",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸åœ¨ä¸é€‚å½“çš„åœºåˆè·‘æ¥è·‘å»æˆ–çˆ¬ä¸Šçˆ¬ä¸‹",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸æ— æ³•å®‰é™åœ°å‚åŠ æ¸¸æˆæˆ–ä¼‘é—²æ´»åŠ¨",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå¥½åƒ'æœ‰é©¬è¾¾åœ¨æ¨åŠ¨'",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸è¯å¤ªå¤š",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "é—®é¢˜è¿˜æ²¡è¯´å®Œï¼Œå­©å­ç»å¸¸è„±å£è¯´å‡ºç­”æ¡ˆ",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸æ— æ³•ç­‰å¾…è½®åˆ°è‡ªå·±",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
          {
            text: "å­©å­ç»å¸¸æ‰“æ–­æˆ–å¹²æ‰°åˆ«äººçš„æ´»åŠ¨",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¶å°”", value: 1 },
              { text: "ç»å¸¸", value: 2 },
              { text: "æ€»æ˜¯", value: 3 },
            ],
          },
        ],
        adult: [
          // æ³¨æ„åŠ›ä¸é›†ä¸­ç—‡çŠ¶
          {
            text: "æˆ‘å¾ˆéš¾ä¸“æ³¨äºå·¥ä½œæˆ–ä»»åŠ¡çš„ç»†èŠ‚ï¼Œç»å¸¸å‡ºç°ç²—å¿ƒçš„é”™è¯¯",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¾ˆéš¾åœ¨å·¥ä½œæˆ–å¨±ä¹æ´»åŠ¨ä¸­ä¿æŒæ³¨æ„åŠ›",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "å½“æœ‰äººç›´æ¥å¯¹æˆ‘è¯´è¯æ—¶ï¼Œæˆ‘ä¼¼ä¹æ²¡æœ‰åœ¨å¬",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸æ— æ³•å®Œæˆå·¥ä½œã€å®¶åŠ¡æˆ–å…¶ä»–èŒè´£",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨ç»„ç»‡ä»»åŠ¡å’Œæ´»åŠ¨æ–¹é¢æœ‰å›°éš¾",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘é¿å…ã€ä¸å–œæ¬¢æˆ–ä¸æ„¿æ„è¿›è¡Œéœ€è¦æŒç»­ç²¾ç¥åŠªåŠ›çš„ä»»åŠ¡",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸é—å¤±å·¥ä½œæˆ–æ´»åŠ¨æ‰€éœ€çš„ç‰©å“",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å®¹æ˜“è¢«å¤–ç•Œåˆºæ¿€åˆ†æ•£æ³¨æ„åŠ›",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨æ—¥å¸¸æ´»åŠ¨ä¸­ç»å¸¸å¥å¿˜",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          // å¤šåŠ¨å†²åŠ¨ç—‡çŠ¶
          {
            text: "æˆ‘åœ¨åº§ä½ä¸Šåç«‹ä¸å®‰ï¼Œæ‘†å¼„æ‰‹è„š",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "åœ¨éœ€è¦ä¿æŒåç€çš„æƒ…å†µä¸‹ï¼Œæˆ‘æ„Ÿåˆ°ä¸å®‰æˆ–æƒ³è¦èµ·æ¥èµ°åŠ¨",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘æ„Ÿåˆ°è¿‡åº¦æ´»è·ƒå’Œè¢«é©±ä½¿å»åšäº‹æƒ…",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¾ˆéš¾å®‰é™åœ°å‚åŠ ä¼‘é—²æ´»åŠ¨æˆ–å¨±ä¹æ´»åŠ¨",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘è¯´è¯è¿‡å¤š",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "é—®é¢˜è¿˜æ²¡é—®å®Œï¼Œæˆ‘å°±è„±å£è¯´å‡ºç­”æ¡ˆ",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¾ˆéš¾ç­‰å¾…è½®åˆ°è‡ªå·±",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸æ‰“æ–­æˆ–å¹²æ‰°åˆ«äºº",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¾ˆéš¾æ”¾æ¾å’Œå†·é™ä¸‹æ¥",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
        ],
      };

      // ä¸»åº”ç”¨ç»„ä»¶
      function ADHDTestApp() {
        const [currentPage, setCurrentPage] = useState("home");
        const [testType, setTestType] = useState(null);
        const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
        const [answers, setAnswers] = useState([]);
        const [results, setResults] = useState(null);

        const startTest = (type) => {
          setTestType(type);
          setCurrentQuestionIndex(0);
          setAnswers(new Array(testData[type].length).fill(null));
          setCurrentPage("test");
        };

        const selectAnswer = (value) => {
          const newAnswers = [...answers];
          newAnswers[currentQuestionIndex] = value;
          setAnswers(newAnswers);
        };

        const nextQuestion = () => {
          if (currentQuestionIndex < testData[testType].length - 1) {
            setCurrentQuestionIndex(currentQuestionIndex + 1);
          }
        };

        const previousQuestion = () => {
          if (currentQuestionIndex > 0) {
            setCurrentQuestionIndex(currentQuestionIndex - 1);
          }
        };

        const calculateResults = () => {
          const questions = testData[testType];
          let inattentionScore = 0;
          let hyperactivityScore = 0;

          questions.forEach((question, index) => {
            const score = answers[index] || 0;
            if (question.type === "inattention") {
              inattentionScore += score;
            } else {
              hyperactivityScore += score;
            }
          });

          const totalScore = inattentionScore + hyperactivityScore;
          const maxScore = testType === "children" ? 54 : 72;
          const maxInattentionScore = testType === "children" ? 27 : 36;
          const maxHyperactivityScore = testType === "children" ? 27 : 36;

          setResults({
            total: totalScore,
            inattention: inattentionScore,
            hyperactivity: hyperactivityScore,
            maxScore,
            maxInattentionScore,
            maxHyperactivityScore,
          });
          setCurrentPage("results");
        };

        const resetTest = () => {
          setCurrentPage("home");
          setTestType(null);
          setCurrentQuestionIndex(0);
          setAnswers([]);
          setResults(null);
        };

        if (currentPage === "home") {
          return <HomePage onStartTest={startTest} />;
        } else if (currentPage === "test") {
          return (
            <TestPage
              testType={testType}
              questions={testData[testType]}
              currentQuestionIndex={currentQuestionIndex}
              answers={answers}
              onSelectAnswer={selectAnswer}
              onNextQuestion={nextQuestion}
              onPreviousQuestion={previousQuestion}
              onSubmitTest={calculateResults}
              onBackToHome={resetTest}
            />
          );
        } else if (currentPage === "results") {
          return (
            <ResultsPage
              testType={testType}
              results={results}
              onRetakeTest={resetTest}
            />
          );
        }
      }

      // é¦–é¡µç»„ä»¶
      function HomePage({ onStartTest }) {
        return (
          <div className="container">
            <div className="page active">
              <div className="hero">
                <div className="hero-content">
                  <h1 className="hero-title">ADHDè‡ªæµ‹é‡è¡¨</h1>
                  <p className="hero-subtitle">
                    åŸºäºå›½é™…æ ‡å‡†åŒ»å­¦é‡è¡¨ï¼Œæä¾›ä¸“ä¸šçš„ADHDåˆæ­¥ç­›æŸ¥
                  </p>
                  <div className="disclaimer">
                    <p>
                      <strong>é‡è¦å£°æ˜ï¼š</strong>
                      æœ¬æµ‹è¯•ä»…ç”¨äºåˆæ­¥ç­›æŸ¥ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»å­¦è¯Šæ–­ã€‚å¦‚æœ‰ç–‘è™‘ï¼Œè¯·å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿã€‚
                    </p>
                  </div>
                </div>
              </div>

              <div className="test-selection">
                <h2>è¯·é€‰æ‹©é€‚åˆçš„æµ‹è¯•ç‰ˆæœ¬</h2>
                <div className="test-cards">
                  <div
                    className="test-card"
                    onClick={() => onStartTest("children")}
                  >
                    <div className="card-icon">ğŸ‘¶</div>
                    <h3>å„¿ç«¥ç‰ˆ</h3>
                    <p>é€‚ç”¨å¹´é¾„ï¼š6-18å²</p>
                    <p className="card-description">
                      åŸºäºADHD-RSé‡è¡¨ï¼ŒåŒ…å«18ä¸ªæ ¸å¿ƒç—‡çŠ¶è¯„ä¼°é¡¹ç›®
                    </p>
                    <button className="btn-primary">å¼€å§‹æµ‹è¯•</button>
                  </div>

                  <div
                    className="test-card"
                    onClick={() => onStartTest("adult")}
                  >
                    <div className="card-icon">ğŸ‘¤</div>
                    <h3>æˆäººç‰ˆ</h3>
                    <p>é€‚ç”¨å¹´é¾„ï¼š18å²ä»¥ä¸Š</p>
                    <p className="card-description">
                      åŸºäºæˆäººADHDè‡ªè¯„é‡è¡¨(ASRS)ï¼Œè¯„ä¼°æˆå¹´æœŸADHDç—‡çŠ¶
                    </p>
                    <button className="btn-primary">å¼€å§‹æµ‹è¯•</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // æµ‹è¯•é¡µé¢ç»„ä»¶
      function TestPage({
        testType,
        questions,
        currentQuestionIndex,
        answers,
        onSelectAnswer,
        onNextQuestion,
        onPreviousQuestion,
        onSubmitTest,
        onBackToHome,
      }) {
        const currentQuestion = questions[currentQuestionIndex];
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        const isLastQuestion = currentQuestionIndex === questions.length - 1;
        const hasAnswer =
          answers[currentQuestionIndex] !== null &&
          answers[currentQuestionIndex] !== undefined;
        const allAnswered = answers.every(
          (answer) => answer !== null && answer !== undefined
        );

        return (
          <div className="container">
            <div className="page active">
              <div className="test-header">
                <button className="btn-back" onClick={onBackToHome}>
                  â† è¿”å›é¦–é¡µ
                </button>
                <div className="progress-container">
                  <div className="progress-bar">
                    <div
                      className="progress-fill"
                      style={{ width: `${progress}%` }}
                    ></div>
                  </div>
                  <span className="progress-text">
                    {currentQuestionIndex + 1} / {questions.length}
                  </span>
                </div>
              </div>

              <div className="test-content">
                <div className="question-card">
                  <div className="question-number">
                    é—®é¢˜ <span>{currentQuestionIndex + 1}</span>
                  </div>
                  <h2 className="question-text">{currentQuestion.text}</h2>
                  <div className="answer-options">
                    {currentQuestion.options.map((option, index) => (
                      <div
                        key={index}
                        className={`answer-option ${
                          answers[currentQuestionIndex] === option.value
                            ? "selected"
                            : ""
                        }`}
                        onClick={() => onSelectAnswer(option.value)}
                      >
                        <input
                          type="radio"
                          name="answer"
                          value={option.value}
                          checked={
                            answers[currentQuestionIndex] === option.value
                          }
                          onChange={() => {}}
                        />
                        <label>{option.text}</label>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="test-navigation">
                  <button
                    className="btn-secondary"
                    onClick={onPreviousQuestion}
                    disabled={currentQuestionIndex === 0}
                  >
                    ä¸Šä¸€é¢˜
                  </button>
                  {isLastQuestion ? (
                    <button
                      className="btn-primary"
                      onClick={onSubmitTest}
                      disabled={!allAnswered}
                    >
                      æŸ¥çœ‹ç»“æœ
                    </button>
                  ) : (
                    <button
                      className="btn-primary"
                      onClick={onNextQuestion}
                      disabled={!hasAnswer}
                    >
                      ä¸‹ä¸€é¢˜
                    </button>
                  )}
                </div>
              </div>
            </div>
          </div>
        );
      }

      // ç»“æœé¡µé¢ç»„ä»¶
      // é›·è¾¾å›¾ç»„ä»¶
      function RadarChart({ testType, results }) {
        const chartRef = React.useRef(null);
        const chartInstance = React.useRef(null);

        // è®¡ç®—å„ç»´åº¦æ•°æ®
        const {
          inattention,
          hyperactivity,
          maxInattentionScore,
          maxHyperactivityScore,
        } = results;

        let data, labels;

        if (testType === "children") {
          // å„¿ç«¥ç‰ˆï¼šæ³¨æ„åŠ›ä¸é›†ä¸­ã€å¤šåŠ¨å†²åŠ¨ã€æ‰§è¡ŒåŠŸèƒ½ã€æƒ…ç»ªè°ƒèŠ‚ã€ç¤¾äº¤æŠ€èƒ½
          const executiveScore = Math.round(
            (inattention + hyperactivity) * 0.3
          ); // åŸºäºæ³¨æ„åŠ›å’Œå¤šåŠ¨æ¨ç®—
          const emotionalScore = Math.round(hyperactivity * 0.8); // åŸºäºå¤šåŠ¨æ¨ç®—
          const socialScore = Math.round((inattention + hyperactivity) * 0.25); // åŸºäºæ•´ä½“ç—‡çŠ¶æ¨ç®—

          labels = [
            "æ³¨æ„åŠ›é›†ä¸­",
            "å†²åŠ¨æ§åˆ¶",
            "æ‰§è¡ŒåŠŸèƒ½",
            "æƒ…ç»ªè°ƒèŠ‚",
            "ç¤¾äº¤æŠ€èƒ½",
          ];
          data = [
            Math.round((1 - inattention / maxInattentionScore) * 100), // åå‘è®¡ç®—ï¼Œåˆ†æ•°è¶Šé«˜èƒ½åŠ›è¶Šå¼º
            Math.round((1 - hyperactivity / maxHyperactivityScore) * 100),
            Math.max(0, 100 - executiveScore),
            Math.max(0, 100 - emotionalScore),
            Math.max(0, 100 - socialScore),
          ];
        } else {
          // æˆäººç‰ˆï¼šæ³¨æ„åŠ›ã€å¤šåŠ¨æ€§ã€å†²åŠ¨æ€§ã€æ‰§è¡ŒåŠŸèƒ½ã€æ—¶é—´ç®¡ç†
          const executiveScore = Math.round(
            (inattention + hyperactivity) * 0.35
          );
          const timeManagementScore = Math.round(inattention * 0.9);

          labels = [
            "æ³¨æ„åŠ›é›†ä¸­",
            "æ´»åŠ¨æ§åˆ¶",
            "å†²åŠ¨æ§åˆ¶",
            "æ‰§è¡ŒåŠŸèƒ½",
            "æ—¶é—´ç®¡ç†",
          ];
          data = [
            Math.round((1 - inattention / maxInattentionScore) * 100),
            Math.round((1 - hyperactivity / maxHyperactivityScore) * 100),
            Math.round((1 - hyperactivity / maxHyperactivityScore) * 100),
            Math.max(0, 100 - executiveScore),
            Math.max(0, 100 - timeManagementScore),
          ];
        }

        React.useEffect(() => {
          if (chartRef.current) {
            // é”€æ¯ä¹‹å‰çš„å›¾è¡¨å®ä¾‹
            if (chartInstance.current) {
              chartInstance.current.destroy();
            }

            const ctx = chartRef.current.getContext("2d");

            chartInstance.current = new Chart(ctx, {
              type: "radar",
              data: {
                labels: labels,
                datasets: [
                  {
                    label: "èƒ½åŠ›æ°´å¹³",
                    data: data,
                    backgroundColor: "rgba(79, 172, 254, 0.15)",
                    borderColor: "rgba(79, 172, 254, 1)",
                    borderWidth: 2,
                    pointBackgroundColor: "rgba(79, 172, 254, 1)",
                    pointBorderColor: "#fff",
                    pointBorderWidth: 2,
                    pointRadius: 5,
                    pointHoverBackgroundColor: "#fff",
                    pointHoverBorderColor: "rgba(79, 172, 254, 1)",
                    pointHoverRadius: 6,
                  },
                ],
              },
              options: {
                responsive: true,
                maintainAspectRatio: false,
                layout: {
                  padding: 20,
                },
                plugins: {
                  legend: {
                    display: false,
                  },
                  tooltip: {
                    callbacks: {
                      title: function (tooltipItems) {
                        return tooltipItems[0].label;
                      },
                      label: function (tooltipItem) {
                        return "èƒ½åŠ›æ°´å¹³: " + tooltipItem.raw + "%";
                      },
                    },
                  },
                },
                scales: {
                  r: {
                    beginAtZero: true,
                    max: 100,
                    min: 0,
                    ticks: {
                      stepSize: 25,
                      display: false, // éšè—æ•°å­—åˆ»åº¦
                      backdropColor: "transparent",
                    },
                    grid: {
                      color: "rgba(0, 0, 0, 0.08)",
                      lineWidth: 1,
                    },
                    angleLines: {
                      color: "rgba(0, 0, 0, 0.08)",
                      lineWidth: 1,
                    },
                    pointLabels: {
                      font: {
                        size: 13,
                        family: "Inter, sans-serif",
                        weight: "500",
                      },
                      color: "#2d3748",
                      padding: 15,
                    },
                  },
                },
              },
            });
          }
        }, [testType, results, labels, data]);

        return (
          <div className="radar-chart-container">
            <h4>èƒ½åŠ›åˆ†æé›·è¾¾å›¾</h4>
            <div className="chart-wrapper">
              <canvas ref={chartRef}></canvas>
            </div>

            {/* æ•°æ®è¡¨æ ¼ */}
            <div className="chart-data-table">
              <table>
                <thead>
                  <tr>
                    <th>èƒ½åŠ›ç»´åº¦</th>
                    <th>æ°´å¹³è¯„åˆ†</th>
                    <th>èƒ½åŠ›çŠ¶æ€</th>
                  </tr>
                </thead>
                <tbody>
                  {labels.map((label, index) => (
                    <tr key={index}>
                      <td className="dimension-name">{label}</td>
                      <td className="score-value">{data[index]}%</td>
                      <td className="status-indicator">
                        <span
                          className={`status-badge ${
                            data[index] >= 70
                              ? "status-good"
                              : data[index] >= 40
                              ? "status-medium"
                              : "status-low"
                          }`}
                        >
                          {data[index] >= 70
                            ? "è‰¯å¥½"
                            : data[index] >= 40
                            ? "ä¸€èˆ¬"
                            : "å¾…æå‡"}
                        </span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>

            <p className="chart-note">
              * å›¾è¡¨æ˜¾ç¤ºå„é¡¹èƒ½åŠ›çš„ç›¸å¯¹æ°´å¹³ï¼Œå¯ç‚¹å‡»æ•°æ®ç‚¹æŸ¥çœ‹å…·ä½“æ•°å€¼
            </p>
          </div>
        );
      }

      function ResultsPage({ testType, results, onRetakeTest }) {
        const {
          total,
          inattention,
          hyperactivity,
          maxScore,
          maxInattentionScore,
          maxHyperactivityScore,
        } = results;

        // è®¡ç®—åˆ†æç»“æœ
        const analysis = getResultAnalysis(testType, results);
        const scoreInterpretation = getScoreInterpretation(
          testType,
          total,
          maxScore
        );
        const personalizedAnalysis = getPersonalizedAnalysis(testType, results);

        const inattentionPercentage = (inattention / maxInattentionScore) * 100;
        const hyperactivityPercentage =
          (hyperactivity / maxHyperactivityScore) * 100;

        return (
          <div className="container">
            <div className="page active">
              <div className="result-header">
                <button className="btn-back" onClick={onRetakeTest}>
                  â† é‡æ–°æµ‹è¯•
                </button>
              </div>

              <div className="result-content">
                <div className="result-card">
                  <div className="result-score">
                    <div className="score-card">
                      <div className="score-label">æµ‹è¯•æ€»åˆ†</div>
                      <div className="score-main">
                        <span className="current-score">{total}</span>
                        <span className="score-separator">/</span>
                        <span className="max-score">{maxScore}</span>
                      </div>
                      <div className="score-percentage">
                        {Math.round((total / maxScore) * 100)}%
                      </div>
                    </div>
                  </div>

                  <div className="result-level">
                    <h2 className="level-title">{analysis.level}</h2>
                    <p className="level-description">{analysis.description}</p>
                  </div>

                  <div className="result-details">
                    <h3>è¯¦ç»†åˆ†æ</h3>

                    <div className="score-interpretation">
                      <h4>åˆ†æ•°è§£è¯»</h4>
                      <div
                        className="interpretation-content"
                        dangerouslySetInnerHTML={{
                          __html: scoreInterpretation,
                        }}
                      ></div>
                    </div>

                    <div className="symptom-analysis">
                      <div className="symptom-category">
                        <h4>æ³¨æ„åŠ›ä¸é›†ä¸­ç—‡çŠ¶</h4>
                        <div className="symptom-score">
                          <span className="score-display">
                            {inattention} / {maxInattentionScore} åˆ†
                          </span>
                          <div className="score-bar">
                            <div
                              className="score-fill"
                              style={{ width: `${inattentionPercentage}%` }}
                            ></div>
                          </div>
                        </div>
                        <div className="symptom-interpretation">
                          å¾—åˆ† {Math.round(inattentionPercentage)}%
                          {inattentionPercentage <= 30
                            ? "ï¼Œæ³¨æ„åŠ›é›†ä¸­èƒ½åŠ›è‰¯å¥½ï¼Œå¾ˆå°‘å‡ºç°æ³¨æ„åŠ›åˆ†æ•£çš„é—®é¢˜ã€‚"
                            : inattentionPercentage <= 60
                            ? "ï¼Œå­˜åœ¨è½»åˆ°ä¸­åº¦çš„æ³¨æ„åŠ›é—®é¢˜ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½éš¾ä»¥é›†ä¸­æ³¨æ„åŠ›ã€‚"
                            : "ï¼Œæ³¨æ„åŠ›é—®é¢˜è¾ƒä¸ºä¸¥é‡ï¼Œç»å¸¸å‡ºç°æ³¨æ„åŠ›ä¸é›†ä¸­ã€å®¹æ˜“åˆ†å¿ƒçš„æƒ…å†µã€‚"}
                        </div>
                      </div>

                      <div className="symptom-category">
                        <h4>å¤šåŠ¨å†²åŠ¨ç—‡çŠ¶</h4>
                        <div className="symptom-score">
                          <span className="score-display">
                            {hyperactivity} / {maxHyperactivityScore} åˆ†
                          </span>
                          <div className="score-bar">
                            <div
                              className="score-fill"
                              style={{ width: `${hyperactivityPercentage}%` }}
                            ></div>
                          </div>
                        </div>
                        <div className="symptom-interpretation">
                          å¾—åˆ† {Math.round(hyperactivityPercentage)}%
                          {hyperactivityPercentage <= 30
                            ? "ï¼Œè¡Œä¸ºæ§åˆ¶èƒ½åŠ›è‰¯å¥½ï¼Œå¾ˆå°‘å‡ºç°å†²åŠ¨æˆ–è¿‡åº¦æ´»è·ƒçš„è¡Œä¸ºã€‚"
                            : hyperactivityPercentage <= 60
                            ? "ï¼Œå­˜åœ¨è½»åˆ°ä¸­åº¦çš„å†²åŠ¨æ§åˆ¶é—®é¢˜ï¼Œæœ‰æ—¶å¯èƒ½è¡¨ç°å‡ºåç«‹ä¸å®‰æˆ–å†²åŠ¨è¡Œä¸ºã€‚"
                            : "ï¼Œå†²åŠ¨æ§åˆ¶é—®é¢˜è¾ƒä¸ºä¸¥é‡ï¼Œç»å¸¸è¡¨ç°å‡ºå¤šåŠ¨ã€å†²åŠ¨æˆ–éš¾ä»¥å®‰é™çš„è¡Œä¸ºã€‚"}
                        </div>
                      </div>
                    </div>

                    <RadarChart testType={testType} results={results} />

                    <div className="personalized-analysis">
                      <h4>ä¸ªæ€§åŒ–åˆ†æ</h4>
                      <div
                        className="personalized-content"
                        dangerouslySetInnerHTML={{
                          __html: personalizedAnalysis,
                        }}
                      ></div>
                    </div>

                    <div className="recommendations">
                      <h4>ä¸“ä¸šå»ºè®®</h4>
                      <div
                        className="recommendation-content"
                        dangerouslySetInnerHTML={{
                          __html: analysis.recommendations,
                        }}
                      ></div>
                    </div>
                  </div>

                  <div className="result-actions">
                    <button className="btn-primary" onClick={onRetakeTest}>
                      é‡æ–°æµ‹è¯•
                    </button>
                    <button
                      className="btn-secondary"
                      onClick={() => window.print()}
                    >
                      ä¿å­˜ç»“æœ
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // åˆ†æå‡½æ•°
      function getResultAnalysis(testType, scores) {
        const { total } = scores;

        if (testType === "children") {
          if (total <= 18) {
            return {
              level: "ä½é£é™©",
              description:
                "å½“å‰ç—‡çŠ¶è¡¨ç°è¾ƒè½»å¾®ï¼ŒADHDçš„å¯èƒ½æ€§è¾ƒä½ã€‚å­©å­çš„æ³¨æ„åŠ›å’Œè¡Œä¸ºæ§åˆ¶èƒ½åŠ›åŸºæœ¬æ­£å¸¸ã€‚",
              recommendations: `
                            <ul>
                                <li>ç»§ç»­ä¿æŒè‰¯å¥½çš„å­¦ä¹ å’Œç”Ÿæ´»ä¹ æƒ¯</li>
                                <li>é€‚å½“å¢åŠ ä½“è‚²é”»ç‚¼å’Œæˆ·å¤–æ´»åŠ¨</li>
                                <li>å»ºç«‹è§„å¾‹çš„ä½œæ¯æ—¶é—´</li>
                                <li>é¼“åŠ±å­©å­å‚ä¸éœ€è¦ä¸“æ³¨çš„æ´»åŠ¨ï¼Œå¦‚é˜…è¯»ã€æ‹¼å›¾ç­‰</li>
                            </ul>
                        `,
            };
          } else if (total <= 36) {
            return {
              level: "ä¸­ç­‰é£é™©",
              description:
                "å­˜åœ¨ä¸€å®šç¨‹åº¦çš„æ³¨æ„åŠ›æˆ–è¡Œä¸ºæ§åˆ¶é—®é¢˜ï¼Œå»ºè®®å¯†åˆ‡å…³æ³¨å­©å­çš„è¡¨ç°ï¼Œå¯è€ƒè™‘å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿã€‚",
              recommendations: `
                            <ul>
                                <li><strong>å»ºè®®å’¨è¯¢å„¿ç«¥å¿ƒç†åŒ»ç”Ÿæˆ–å‘è‚²è¡Œä¸ºç§‘åŒ»ç”Ÿ</strong></li>
                                <li>å»ºç«‹æ›´åŠ ç»“æ„åŒ–çš„æ—¥å¸¸routine</li>
                                <li>ä½¿ç”¨æ˜ç¡®çš„æŒ‡ä»¤å’Œè§†è§‰æç¤º</li>
                                <li>æä¾›å®‰é™ã€æ— å¹²æ‰°çš„å­¦ä¹ ç¯å¢ƒ</li>
                                <li>é€‚å½“åˆ†è§£å¤æ‚ä»»åŠ¡ï¼Œç»™äºˆåŠæ—¶çš„æ­£é¢åé¦ˆ</li>
                                <li>ä¸å­¦æ ¡è€å¸ˆä¿æŒå¯†åˆ‡æ²Ÿé€š</li>
                            </ul>
                        `,
            };
          } else {
            return {
              level: "é«˜é£é™©",
              description:
                "ç—‡çŠ¶è¡¨ç°æ˜æ˜¾ï¼Œå¼ºçƒˆå»ºè®®å°½å¿«å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿè¿›è¡Œè¿›ä¸€æ­¥è¯„ä¼°å’Œè¯Šæ–­ã€‚",
              recommendations: `
                            <ul>
                                <li><strong>è¯·å°½å¿«å’¨è¯¢å„¿ç«¥ç²¾ç¥ç§‘åŒ»ç”Ÿæˆ–å‘è‚²è¡Œä¸ºç§‘åŒ»ç”Ÿ</strong></li>
                                <li>å‡†å¤‡è¯¦ç»†çš„ç—‡çŠ¶è®°å½•å’Œå­¦æ ¡åé¦ˆ</li>
                                <li>è€ƒè™‘å¤šå­¦ç§‘è¯„ä¼°ï¼ˆåŒ»ç”Ÿã€å¿ƒç†å¸ˆã€æ•™å¸ˆè”åˆè¯„ä¼°ï¼‰</li>
                                <li>äº†è§£å­¦æ ¡çš„ç‰¹æ®Šæ•™è‚²èµ„æºå’Œæ”¯æŒæœåŠ¡</li>
                                <li>å­¦ä¹ ADHDç›¸å…³çŸ¥è¯†ï¼Œä¸ºå¯èƒ½çš„æ²»ç–—åšå¥½å‡†å¤‡</li>
                                <li>ä¿æŒè€å¿ƒå’Œç†è§£ï¼Œé¿å…è¿‡åº¦æ‰¹è¯„å­©å­</li>
                            </ul>
                        `,
            };
          }
        } else {
          if (total <= 24) {
            return {
              level: "ä½é£é™©",
              description:
                "å½“å‰ç—‡çŠ¶è¡¨ç°è¾ƒè½»å¾®ï¼ŒæˆäººADHDçš„å¯èƒ½æ€§è¾ƒä½ã€‚æ‚¨çš„æ³¨æ„åŠ›å’Œå†²åŠ¨æ§åˆ¶èƒ½åŠ›åŸºæœ¬æ­£å¸¸ã€‚",
              recommendations: `
                            <ul>
                                <li>ä¿æŒè‰¯å¥½çš„å·¥ä½œå’Œç”Ÿæ´»ä¹ æƒ¯</li>
                                <li>ä½¿ç”¨æ—¶é—´ç®¡ç†å·¥å…·æé«˜æ•ˆç‡</li>
                                <li>å®šæœŸè¿›è¡Œä½“è‚²é”»ç‚¼ç¼“è§£å‹åŠ›</li>
                                <li>ä¿è¯å……è¶³çš„ç¡çœ å’Œåˆç†çš„è¥å…»</li>
                            </ul>
                        `,
            };
          } else if (total <= 48) {
            return {
              level: "ä¸­ç­‰é£é™©",
              description:
                "å­˜åœ¨ä¸€å®šç¨‹åº¦çš„æ³¨æ„åŠ›ç¼ºé™·æˆ–å†²åŠ¨æ§åˆ¶é—®é¢˜ï¼Œå»ºè®®å…³æ³¨è¿™äº›ç—‡çŠ¶å¯¹æ—¥å¸¸ç”Ÿæ´»çš„å½±å“ï¼Œå¯è€ƒè™‘å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿã€‚",
              recommendations: `
                            <ul>
                                <li><strong>å»ºè®®å’¨è¯¢ç²¾ç¥ç§‘åŒ»ç”Ÿæˆ–å¿ƒç†åŒ»ç”Ÿ</strong></li>
                                <li>ä½¿ç”¨ä»»åŠ¡ç®¡ç†Appå’Œæé†’å·¥å…·</li>
                                <li>åˆ›å»ºæ— å¹²æ‰°çš„å·¥ä½œç¯å¢ƒ</li>
                                <li>å­¦ä¹ æ­£å¿µå†¥æƒ³å’Œæ”¾æ¾æŠ€å·§</li>
                                <li>å»ºç«‹è§„å¾‹çš„æ—¥å¸¸ä½œæ¯</li>
                                <li>ä¸å®¶äººæœ‹å‹åˆ†äº«æ‚¨çš„å›°æ‰°ï¼Œè·å¾—æ”¯æŒ</li>
                            </ul>
                        `,
            };
          } else {
            return {
              level: "é«˜é£é™©",
              description:
                "ç—‡çŠ¶è¡¨ç°æ˜æ˜¾ï¼Œå¼ºçƒˆå»ºè®®å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿè¿›è¡Œå…¨é¢è¯„ä¼°ã€‚æˆäººADHDå¦‚æœå¾—åˆ°é€‚å½“æ²»ç–—ï¼Œå¯ä»¥æ˜¾è‘—æ”¹å–„ç”Ÿæ´»è´¨é‡ã€‚",
              recommendations: `
                            <ul>
                                <li><strong>è¯·å°½å¿«å’¨è¯¢ç²¾ç¥ç§‘åŒ»ç”Ÿè¿›è¡Œä¸“ä¸šè¯„ä¼°</strong></li>
                                <li>å‡†å¤‡è¯¦ç»†çš„ç—‡çŠ¶å†å²å’ŒåŠŸèƒ½å½±å“è®°å½•</li>
                                <li>äº†è§£æˆäººADHDçš„æ²»ç–—é€‰é¡¹ï¼ˆè¯ç‰©å’Œéè¯ç‰©æ²»ç–—ï¼‰</li>
                                <li>è€ƒè™‘è®¤çŸ¥è¡Œä¸ºæ²»ç–—(CBT)ç­‰å¿ƒç†æ²»ç–—</li>
                                <li>å¯»æ‰¾ADHDæ”¯æŒå°ç»„æˆ–åœ¨çº¿ç¤¾åŒº</li>
                                <li>å­¦ä¹ ADHDç®¡ç†ç­–ç•¥å’Œç”Ÿæ´»æŠ€èƒ½</li>
                                <li>å‘é›‡ä¸»äº†è§£å·¥ä½œåœºæ‰€çš„åˆç†è°ƒæ•´æ”¿ç­–</li>
                            </ul>
                        `,
            };
          }
        }
      }

      function getScoreInterpretation(testType, total, maxScore) {
        const percentage = Math.round((total / maxScore) * 100);

        let interpretation = `<p><strong>æ‚¨çš„æ€»åˆ†ä¸º ${total} åˆ†ï¼ˆæ»¡åˆ† ${maxScore} åˆ†ï¼‰ï¼Œå æ€»åˆ†çš„ ${percentage}%</strong></p>`;

        if (testType === "children") {
          interpretation += `
                    <div class="score-ranges">
                        <div class="score-range ${
                          total <= 18 ? "current" : ""
                        }">
                            <span class="range">0-18åˆ†</span>
                            <span class="level low-risk">ä½é£é™©</span>
                            <span class="desc">ç—‡çŠ¶è½»å¾®ï¼ŒADHDå¯èƒ½æ€§è¾ƒä½</span>
                        </div>
                        <div class="score-range ${
                          total > 18 && total <= 36 ? "current" : ""
                        }">
                            <span class="range">19-36åˆ†</span>
                            <span class="level medium-risk">ä¸­ç­‰é£é™©</span>
                            <span class="desc">å­˜åœ¨æ˜æ˜¾ç—‡çŠ¶ï¼Œå»ºè®®ä¸“ä¸šè¯„ä¼°</span>
                        </div>
                        <div class="score-range ${total > 36 ? "current" : ""}">
                            <span class="range">37-54åˆ†</span>
                            <span class="level high-risk">é«˜é£é™©</span>
                            <span class="desc">ç—‡çŠ¶æ˜¾è‘—ï¼Œå¼ºçƒˆå»ºè®®å°±åŒ»</span>
                        </div>
                    </div>
                `;
        } else {
          interpretation += `
                    <div class="score-ranges">
                        <div class="score-range ${
                          total <= 24 ? "current" : ""
                        }">
                            <span class="range">0-24åˆ†</span>
                            <span class="level low-risk">ä½é£é™©</span>
                            <span class="desc">ç—‡çŠ¶è½»å¾®ï¼ŒADHDå¯èƒ½æ€§è¾ƒä½</span>
                        </div>
                        <div class="score-range ${
                          total > 24 && total <= 48 ? "current" : ""
                        }">
                            <span class="range">25-48åˆ†</span>
                            <span class="level medium-risk">ä¸­ç­‰é£é™©</span>
                            <span class="desc">å­˜åœ¨æ˜æ˜¾ç—‡çŠ¶ï¼Œå»ºè®®ä¸“ä¸šè¯„ä¼°</span>
                        </div>
                        <div class="score-range ${total > 48 ? "current" : ""}">
                            <span class="range">49-72åˆ†</span>
                            <span class="level high-risk">é«˜é£é™©</span>
                            <span class="desc">ç—‡çŠ¶æ˜¾è‘—ï¼Œå¼ºçƒˆå»ºè®®å°±åŒ»</span>
                        </div>
                    </div>
                `;
        }

        return interpretation;
      }

      function getPersonalizedAnalysis(testType, scores) {
        const { total, inattention, hyperactivity } = scores;
        const testSubject = testType === "children" ? "å­©å­" : "æ‚¨";

        let analysis = [];

        // ç—‡çŠ¶ç±»å‹åˆ†æ
        if (inattention > hyperactivity) {
          const diff = inattention - hyperactivity;
          if (diff >= 6) {
            analysis.push(
              `<span class="highlight">æ³¨æ„åŠ›ä¸é›†ä¸­</span>æ˜¯ä¸»è¦è¡¨ç°ï¼Œ${testSubject}æ›´å¤šåœ°è¡¨ç°ä¸ºéš¾ä»¥é›†ä¸­æ³¨æ„åŠ›ã€å®¹æ˜“åˆ†å¿ƒã€å¥å¿˜ç­‰é—®é¢˜ã€‚`
            );
          } else {
            analysis.push(
              `${testSubject}çš„æ³¨æ„åŠ›é—®é¢˜å’Œå¤šåŠ¨å†²åŠ¨é—®é¢˜éƒ½æœ‰æ‰€è¡¨ç°ï¼Œä½†<span class="highlight">æ³¨æ„åŠ›ä¸é›†ä¸­</span>ç¨å¾®çªå‡ºä¸€äº›ã€‚`
            );
          }
        } else if (hyperactivity > inattention) {
          const diff = hyperactivity - inattention;
          if (diff >= 6) {
            analysis.push(
              `<span class="highlight">å¤šåŠ¨å†²åŠ¨</span>æ˜¯ä¸»è¦è¡¨ç°ï¼Œ${testSubject}æ›´å¤šåœ°è¡¨ç°ä¸ºåç«‹ä¸å®‰ã€å†²åŠ¨è¡Œä¸ºã€éš¾ä»¥å®‰é™ç­‰é—®é¢˜ã€‚`
            );
          } else {
            analysis.push(
              `${testSubject}çš„æ³¨æ„åŠ›é—®é¢˜å’Œå¤šåŠ¨å†²åŠ¨é—®é¢˜éƒ½æœ‰æ‰€è¡¨ç°ï¼Œä½†<span class="highlight">å¤šåŠ¨å†²åŠ¨</span>ç¨å¾®çªå‡ºä¸€äº›ã€‚`
            );
          }
        } else {
          analysis.push(
            `${testSubject}åœ¨æ³¨æ„åŠ›ä¸é›†ä¸­å’Œå¤šåŠ¨å†²åŠ¨ä¸¤æ–¹é¢çš„è¡¨ç°<span class="highlight">ç›¸å¯¹å‡è¡¡</span>ï¼Œä¸¤ç±»ç—‡çŠ¶å¹¶å­˜ã€‚`
          );
        }

        // ä¸¥é‡ç¨‹åº¦åˆ†æ
        if (total >= (testType === "children" ? 42 : 60)) {
          analysis.push(
            `ç—‡çŠ¶è¡¨ç°<span class="highlight">éå¸¸æ˜æ˜¾</span>ï¼Œå·²ç»è¾¾åˆ°éœ€è¦ä¸“ä¸šåŒ»ç–—å¹²é¢„çš„ç¨‹åº¦ã€‚`
          );
        } else if (total >= (testType === "children" ? 30 : 40)) {
          analysis.push(
            `ç—‡çŠ¶è¡¨ç°<span class="highlight">æ¯”è¾ƒæ˜æ˜¾</span>ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šåŒ»ç”Ÿçš„è¯„ä¼°å’Œå»ºè®®ã€‚`
          );
        } else if (total >= (testType === "children" ? 18 : 24)) {
          analysis.push(
            `ç—‡çŠ¶è¡¨ç°<span class="highlight">è½»åº¦åˆ°ä¸­åº¦</span>ï¼Œéœ€è¦å…³æ³¨å¹¶é‡‡å–ç›¸åº”çš„ç®¡ç†æªæ–½ã€‚`
          );
        } else {
          analysis.push(
            `å½“å‰ç—‡çŠ¶è¡¨ç°<span class="highlight">è¾ƒè½»</span>ï¼Œä½†ä»éœ€ä¿æŒå…³æ³¨ã€‚`
          );
        }

        // åŠŸèƒ½å½±å“è¯„ä¼°
        if (testType === "adult") {
          if (total > 36) {
            analysis.push(
              `è¿™äº›ç—‡çŠ¶å¾ˆå¯èƒ½å·²ç»å¯¹æ‚¨çš„å·¥ä½œã€å­¦ä¹ æˆ–äººé™…å…³ç³»é€ æˆäº†<span class="highlight">æ˜¾è‘—å½±å“</span>ã€‚`
            );
          } else if (total > 18) {
            analysis.push(
              `è¿™äº›ç—‡çŠ¶å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹å¯¹æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»é€ æˆ<span class="highlight">ä¸€å®šå½±å“</span>ã€‚`
            );
          }
        } else {
          if (total > 36) {
            analysis.push(
              `è¿™äº›ç—‡çŠ¶å¾ˆå¯èƒ½å·²ç»å¯¹å­©å­çš„å­¦ä¹ ã€ç¤¾äº¤æˆ–å®¶åº­ç”Ÿæ´»é€ æˆäº†<span class="highlight">æ˜¾è‘—å½±å“</span>ã€‚`
            );
          } else if (total > 18) {
            analysis.push(
              `è¿™äº›ç—‡çŠ¶å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹å¯¹å­©å­çš„æ—¥å¸¸ç”Ÿæ´»é€ æˆ<span class="highlight">ä¸€å®šå½±å“</span>ã€‚`
            );
          }
        }

        return analysis.join("<br><br>");
      }

      // æ¸²æŸ“åº”ç”¨
      ReactDOM.render(<ADHDTestApp />, document.getElementById("root"));
    </script>
  </body>
</html>
