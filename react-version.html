<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADHDè‡ªæµ‹é‡è¡¨ - Reactç‰ˆ</title>
    <link rel="stylesheet" href="styles.css" />
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        // æµ‹è¯•é¢˜ç›®æ•°æ® - SNAP-IV
        const testData = {
            children: [
                // SNAP-IV æ³¨æ„åŠ›ä¸é›†ä¸­ç—‡çŠ¶ (1-9)
                {
                    text: "ç»å¸¸åœ¨å­¦ä¹ ã€å·¥ä½œæˆ–å…¶ä»–æ´»åŠ¨ä¸­ä¸æ³¨æ„ç»†èŠ‚æˆ–å› ç²—å¿ƒå¤§æ„è€Œå‡ºé”™",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "åœ¨ä»»åŠ¡æˆ–æ¸¸æˆæ´»åŠ¨ä¸­ç»å¸¸éš¾ä»¥ä¿æŒæ³¨æ„",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "åˆ«äººå’Œä»–è¯´è¯æ—¶ï¼Œç»å¸¸æ˜¾å¾—æ²¡æœ‰åœ¨å¬",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸ä¸æŒ‰æŒ‡ç¤ºå®Œæˆå­¦æ ¡ä½œä¸šã€å®¶åŠ¡æˆ–å·¥ä½œèŒè´£ï¼ˆä¸æ˜¯ç”±äºå¯¹ç«‹è¡Œä¸ºæˆ–ä¸ç†è§£æŒ‡ç¤ºï¼‰",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸éš¾ä»¥ç»„ç»‡ä»»åŠ¡å’Œæ´»åŠ¨",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸å›é¿ã€ä¸å–œæ¬¢æˆ–ä¸æ„¿ä»äº‹éœ€è¦æŒç»­åŠ¨è„‘çš„ä»»åŠ¡ï¼ˆå¦‚å­¦æ ¡ä½œä¸šæˆ–å®¶åº­ä½œä¸šï¼‰",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸é—å¤±ä»»åŠ¡æˆ–æ´»åŠ¨æ‰€éœ€çš„ä¸œè¥¿ï¼ˆå¦‚ç©å…·ã€å­¦æ ¡ä½œä¸šã€é“…ç¬”ã€ä¹¦æˆ–å·¥å…·ï¼‰",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸å®¹æ˜“è¢«å¤–åœ¨åˆºæ¿€è½¬ç§»æ³¨æ„åŠ›",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "åœ¨æ—¥å¸¸æ´»åŠ¨ä¸­ç»å¸¸å¥å¿˜",
                    type: "inattention",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                // SNAP-IV å¤šåŠ¨-å†²åŠ¨ç—‡çŠ¶ (10-18)
                {
                    text: "ç»å¸¸æ‰‹è„šåŠ¨ä¸ªä¸åœæˆ–åç€æ—¶æ‰­æ¥æ‰­å»",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "åœ¨åº”è¯¥åç€çš„åœºåˆç»å¸¸ç¦»å¼€åº§ä½",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸åœ¨ä¸åˆé€‚çš„åœºåˆè·‘æ¥è·‘å»æˆ–çˆ¬é«˜çˆ¬ä½ï¼ˆåœ¨é’å°‘å¹´æˆ–æˆäººå¯èƒ½åªæ˜¯åç«‹ä¸å®‰çš„æ„Ÿè§‰ï¼‰",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸æ— æ³•å®‰é™åœ°å‚ä¸æ¸¸æˆæˆ–ä¼‘é—²æ´»åŠ¨",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸'å¿™ä¸ªä¸åœ'æˆ–'åƒè£…äº†å‘åŠ¨æœºä¼¼çš„'è¡ŒåŠ¨",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸è¯´è¯è¿‡å¤š",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸åœ¨é—®é¢˜æ²¡è¯´å®Œæ—¶å°±æŠ¢ç€å›ç­”",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸éš¾ä»¥ç­‰å€™è½®æµ",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸æ‰“æ–­æˆ–å¹²æ‰°åˆ«äººï¼ˆå¦‚æ’å˜´æˆ–æ‰“æ–­åˆ«äººçš„æ¸¸æˆï¼‰",
                    type: "hyperactivity",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                // SNAP-IV å¯¹ç«‹è¿æŠ—éšœç¢ç—‡çŠ¶ (19-26)
                {
                    text: "ç»å¸¸å‘è„¾æ°”",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸ä¸æˆäººäº‰è®º",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸ä¸»åŠ¨è¿æŠ—æˆ–æ‹’ç»éµå®ˆæˆäººçš„è¦æ±‚æˆ–è§„åˆ™",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸æ•…æ„æƒ¹æ¼ä»–äºº",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸ä¸ºè‡ªå·±çš„é”™è¯¯æˆ–ä¸è‰¯è¡Œä¸ºè´£æ€ªä»–äºº",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸æ˜“æ€’æˆ–å®¹æ˜“è¢«ä»–äººæƒ¹æ¼",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸æ„¤æ€’å’Œæ€¨æ¨",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
                {
                    text: "ç»å¸¸æ¶æ„æˆ–æŠ¥å¤æ€§å¼º",
                    type: "oppositional",
                    options: [
                        { text: "ä»ä¸", value: 0 },
                        { text: "å¶å°”", value: 1 },
                        { text: "ç»å¸¸", value: 2 },
                        { text: "æ€»æ˜¯", value: 3 },
                    ],
                },
            ]
        };
        
        function ADHDTestApp() {
            const [currentPage, setCurrentPage] = useState('home');
            const [testType, setTestType] = useState(null);
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [results, setResults] = useState(null);
            
            const questions = testType ? testData[testType] : [];
            const totalQuestions = questions.length;
            
            const selectAnswer = (value) => {
                const newAnswers = [...answers];
                newAnswers[currentQuestionIndex] = parseInt(value);
                setAnswers(newAnswers);
            };
            
            const nextQuestion = () => {
                if (currentQuestionIndex < totalQuestions - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                } else {
                    calculateResults();
                }
            };
            
            const previousQuestion = () => {
                if (currentQuestionIndex > 0) {
                    setCurrentQuestionIndex(currentQuestionIndex - 1);
                }
            };
            
            const calculateResults = () => {
                let inattentionScore = 0;
                let hyperactivityScore = 0;
                let oppositionalScore = 0;
                
                questions.forEach((question, index) => {
                    const score = answers[index] || 0;
                    if (question.type === "inattention") {
                        inattentionScore += score;
                    } else if (question.type === "hyperactivity") {
                        hyperactivityScore += score;
                    } else if (question.type === "oppositional") {
                        oppositionalScore += score;
                    }
                });
                
                const totalScore = inattentionScore + hyperactivityScore + oppositionalScore;
                const adhdScore = inattentionScore + hyperactivityScore;
                
                setResults({
                    total: totalScore,
                    adhd: adhdScore,
                    inattention: inattentionScore,
                    hyperactivity: hyperactivityScore,
                    oppositional: oppositionalScore,
                    maxScore: totalQuestions * 3,
                    maxAdhdScore: 18 * 3,
                    maxInattentionScore: 9 * 3,
                    maxHyperactivityScore: 9 * 3,
                    maxOppositionalScore: 8 * 3,
                });
                setCurrentPage("results");
            };
            
            const resetTest = () => {
                setCurrentPage("home");
                setTestType(null);
                setCurrentQuestionIndex(0);
                setAnswers([]);
                setResults(null);
            };
            
            const HomePage = () => (
                <div className="page active">
                    <div className="hero">
                        <h1 className="hero-title">ADHDè‡ªæµ‹é‡è¡¨</h1>
                        <p className="hero-subtitle">ä¸“ä¸šçš„æ³¨æ„åŠ›ç¼ºé™·å¤šåŠ¨éšœç¢è¯„ä¼°å·¥å…·</p>
                        
                        <div className="disclaimer">
                            <p><strong>é‡è¦æé†’ï¼š</strong>æœ¬æµ‹è¯•ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»å­¦è¯Šæ–­ã€‚å¦‚æœ‰ç–‘è™‘ï¼Œè¯·å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿã€‚</p>
                        </div>
                    </div>

                    <div className="test-selection">
                        <h2>è¯·é€‰æ‹©é€‚åˆçš„æµ‹è¯•ç‰ˆæœ¬</h2>
                        <div className="test-cards">
                            <div className="test-card" onClick={() => {setTestType('children'); setCurrentPage('test');}}>
                                <div className="card-icon">ğŸ‘¶</div>
                                <h3>å„¿ç«¥ç‰ˆ</h3>
                                <p>é€‚ç”¨å¹´é¾„ï¼š6-18å²</p>
                                <p className="card-description">
                                    åŸºäºSNAP-IVé‡è¡¨ï¼ŒåŒ…å«26ä¸ªç—‡çŠ¶è¯„ä¼°é¡¹ç›®ï¼ˆ18ä¸ªADHD+8ä¸ªODDï¼‰
                                </p>
                                <button className="btn-primary">å¼€å§‹æµ‹è¯•</button>
                            </div>

                            <div className="test-card" onClick={() => {setTestType('adult'); setCurrentPage('test');}}>
                                <div className="card-icon">ğŸ‘¤</div>
                                <h3>æˆäººç‰ˆ</h3>
                                <p>é€‚ç”¨å¹´é¾„ï¼š18å²ä»¥ä¸Š</p>
                                <p className="card-description">
                                    åŸºäºæˆäººADHDè‡ªè¯„é‡è¡¨(ASRS)ï¼Œè¯„ä¼°æˆå¹´æœŸADHDç—‡çŠ¶
                                </p>
                                <button className="btn-primary">å¼€å§‹æµ‹è¯•</button>
                            </div>
                        </div>
                    </div>
                </div>
            );
            
            const TestPage = () => {
                const currentQuestion = questions[currentQuestionIndex];
                const progress = ((currentQuestionIndex + 1) / totalQuestions) * 100;
                
                return (
                    <div className="page active">
                        <div className="test-header">
                            <button className="btn-back" onClick={resetTest}>
                                è¿”å›é¦–é¡µ
                            </button>
                            <div className="progress-container">
                                <div className="progress-bar">
                                    <div className="progress-fill" style={{width: `${progress}%`}}></div>
                                </div>
                                <span className="progress-text">{currentQuestionIndex + 1}/{totalQuestions}</span>
                            </div>
                        </div>

                        <div className="test-content">
                            <div className="question-card">
                                <div className="question-number">
                                    é—®é¢˜ {currentQuestionIndex + 1} / {totalQuestions}
                                </div>
                                <h2 className="question-text">{currentQuestion.text}</h2>
                                <div className="answer-options">
                                    {currentQuestion.options.map((option, index) => (
                                        <div 
                                            key={index} 
                                            className={`answer-option ${answers[currentQuestionIndex] === option.value ? 'selected' : ''}`}
                                            onClick={() => selectAnswer(option.value)}
                                        >
                                            <input 
                                                type="radio" 
                                                name="answer" 
                                                id={`option${index}`}
                                                value={option.value}
                                                checked={answers[currentQuestionIndex] === option.value}
                                                onChange={() => selectAnswer(option.value)}
                                            />
                                            <label htmlFor={`option${index}`}>{option.text}</label>
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="test-navigation">
                                <button 
                                    className="btn-secondary" 
                                    onClick={previousQuestion}
                                    disabled={currentQuestionIndex === 0}
                                >
                                    ä¸Šä¸€é¢˜
                                </button>
                                <button 
                                    className="btn-primary" 
                                    onClick={nextQuestion}
                                    disabled={answers[currentQuestionIndex] === undefined}
                                >
                                    {currentQuestionIndex === totalQuestions - 1 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€é¢˜'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };
            
            if (currentPage === 'home') {
                return <HomePage />;
            } else if (currentPage === 'test') {
                return <TestPage />;
            } else if (currentPage === 'results') {
                return (
                    <div className="page active">
                        <div className="result-content">
                            <div className="result-card">
                                <div className="result-score">
                                    <div className="score-card">
                                        <div className="score-label">æµ‹è¯•ç»“æœ</div>
                                        <div className="score-main">
                                            <span className="current-score">{results.total}</span>
                                            <span className="score-separator">/</span>
                                            <span className="max-score">{results.maxScore}</span>
                                        </div>
                                        <div className="score-percentage">
                                            {Math.round((results.total / results.maxScore) * 100)}%
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="symptom-analysis">
                                    <h3>ç—‡çŠ¶åˆ†æ</h3>
                                    <div className="symptom-category">
                                        <h4>æ³¨æ„åŠ›ä¸é›†ä¸­ç—‡çŠ¶</h4>
                                        <div className="symptom-score">
                                            <span>{results.inattention}/{results.maxInattentionScore}</span>
                                            <div className="score-bar">
                                                <div className="score-fill" style={{width: `${(results.inattention/results.maxInattentionScore)*100}%`}}></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="symptom-category">
                                        <h4>å¤šåŠ¨-å†²åŠ¨ç—‡çŠ¶</h4>
                                        <div className="symptom-score">
                                            <span>{results.hyperactivity}/{results.maxHyperactivityScore}</span>
                                            <div className="score-bar">
                                                <div className="score-fill" style={{width: `${(results.hyperactivity/results.maxHyperactivityScore)*100}%`}}></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div className="symptom-category">
                                        <h4>å¯¹ç«‹è¿æŠ—ç—‡çŠ¶</h4>
                                        <div className="symptom-score">
                                            <span>{results.oppositional}/{results.maxOppositionalScore}</span>
                                            <div className="score-bar">
                                                <div className="score-fill" style={{width: `${(results.oppositional/results.maxOppositionalScore)*100}%`}}></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="result-actions">
                                    <button className="btn-secondary" onClick={resetTest}>
                                        é‡æ–°æµ‹è¯•
                                    </button>
                                    <button className="btn-primary" onClick={() => window.print()}>
                                        æ‰“å°ç»“æœ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }
            
            return <HomePage />;
        }
        
        // æ¸²æŸ“åº”ç”¨
        ReactDOM.render(<ADHDTestApp />, document.getElementById('root'));
    </script>
</body>
</html>