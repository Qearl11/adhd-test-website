<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="complex-styles.css" />
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // æµ‹è¯•æ•°æ®
      const testData = {
        complex: [
          {
            text: "æˆ‘ç»å¸¸å¿˜è®°ä»–äººçš„é‡è¦ç»†èŠ‚ï¼Œæ¯”å¦‚ç”Ÿæ—¥æˆ–åå­—ã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸åœ¨è°ˆè¯ä¸­èµ°ç¥ï¼Œæ„Ÿè§‰æ€ç»ªé£˜åˆ°åˆ«çš„åœ°æ–¹å»äº†ï¼Œç­‰å›è¿‡ç¥æ¥å·²ç»é”™è¿‡å¯¹æ–¹çš„è¯ã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨å·¥ä½œæˆ–å­¦ä¹ ä¸­å¸¸å› ä¸æ³¨æ„ç»†èŠ‚è€ŒçŠ¯ç²—å¿ƒé”™è¯¯ã€‚æ¯”å¦‚åšé¢˜çœ‹æ¼æ¡ä»¶ã€å†™æŠ¥å‘Šæ—¶æ¼å­—æˆ–å‡ºç°æ•°å€¼é”™è¯¯ã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¾ˆå®¹æ˜“è¢«å¤–éƒ¨åˆºæ¿€åˆ†å¿ƒï¼Œä¸€ç‚¹å£°éŸ³ã€åŠ¨é™æˆ–æ‰‹æœºæç¤ºå°±ä¼šè®©æˆ‘åˆ†ç¥ã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨é›†ä½“æ´»åŠ¨æˆ–ç¤¾äº¤åœºåˆä¸­éš¾ä»¥ä¿æŒä¸“æ³¨ã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸å¿˜è®°çº¦ä¼šã€æˆªæ­¢æ—¥æœŸæˆ–å…¶ä»–è´£ä»»ã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘éš¾ä»¥é•¿æ—¶é—´ä¸“æ³¨äºæŸé¡¹ä»»åŠ¡æˆ–æ´»åŠ¨ï¼Œæ¯”å¦‚çœ‹ä¹¦ååˆ†é’Ÿå°±å¼€å§‹åˆ†å¿ƒã€‚",
            example: "",
            type: "inattention",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ä¾èµ–å¤–éƒ¨æé†’ï¼ˆå¦‚é—¹é’Ÿã€ä¾¿ç­¾ï¼‰æ¥ä¿æŒæœ‰æ¡ç†ï¼Œå¦‚æœä¸è®¾ç½®æé†’ï¼Œå°±å¾ˆå®¹æ˜“å¿˜è®°è¦åšçš„äº‹æˆ–å¼€ä¼šæ—¶é—´ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸å¼€å§‹æ–°çš„é¡¹ç›®ï¼Œä½†å¾ˆå°‘èƒ½åšæŒåˆ°åº•ï¼Œå®¹æ˜“åŠé€”è€ŒåºŸã€‚ä¸€å¼€å§‹å……æ»¡çƒ­æƒ…ï¼Œæ²¡è¿‡å¤šä¹…å°±ä¸¢åœ¨ä¸€è¾¹ä¸ç®¡äº†ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "é¢å¯¹ä¸€å †å¾…åŠäº‹é¡¹æ—¶æˆ‘éš¾ä»¥ä¸ºä»»åŠ¡æ’åºï¼Œç»å¸¸æ„Ÿåˆ°å‹åŠ›è¿‡å¤§ï¼Œä¸çŸ¥é“ä»å“ªå¼€å§‹ï¼Œæœ€åæ‹–å»¶ä¸å‰ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¸¸å¸¸æŠŠé‡è¦çš„äº‹æ‹–åˆ°æœ€åä¸€åˆ»æ‰å»åšã€‚æ˜çŸ¥é“è¦äº¤æŠ¥å‘Šæˆ–ä½œä¸šï¼Œå´æ€»è¦ç­‰åˆ°æˆªæ­¢å‰æ‰åŠ¨æ‰‹ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¸¸å¸¸éš¾ä»¥æœ‰æ•ˆåˆ†é…æ—¶é—´æˆ–ä½ä¼°å®Œæˆä»»åŠ¡æ‰€éœ€æ—¶é—´ï¼Œå¯¼è‡´é”™è¿‡æˆªæ­¢æ—¥æœŸã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸åœ¨æ²¡å®Œæˆä¸€ä»¶äº‹æ—¶å°±è½¬å»åšå¦ä¸€ä»¶ï¼Œæ¯”å¦‚å†™ä½œä¸šå†™åˆ°ä¸€åŠçªç„¶å»æŸ¥åˆ«çš„èµ„æ–™æˆ–åˆ·æ‰‹æœºã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ä¼šå›é¿æˆ–æ‹–å»¶éœ€è¦é•¿æ—¶é—´é›†ä¸­ç²¾åŠ›çš„ä»»åŠ¡ã€‚æ¯”å¦‚è¦å†™ä¸€ç¯‡è®ºæ–‡æˆ–å®Œæˆä¸€ä¸ªå¤§é¡¹ç›®æ—¶ï¼Œå¯èƒ½ä¼šå…ˆåˆ·æ‰‹æœºã€æ‰“æ‰«æˆ¿é—´ã€åƒä¸œè¥¿æ¥æ‹–å»¶å¼€å§‹çš„æ—¶é—´ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "å› ä¸ºæ—¶é—´ç®¡ç†ä¸å¥½ï¼Œæˆ‘å¸¸è§‰å¾—è‡ªå·±å‡†å¤‡ä¸è¶³ã€‚æ¯”å¦‚å¿«è¦æ±‡æŠ¥æ—¶æ‰å‘ç°èµ„æ–™æ²¡æ•´ç†å¥½ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸å¼„ä¸¢å®Œæˆä»»åŠ¡æ‰€éœ€çš„ç‰©å“ï¼ˆæ¯”å¦‚å‡ºé—¨æ‰¾ä¸åˆ°é’¥åŒ™æ‰‹æœºæˆ–ä¼šè®®å‰æ‰¾ä¸åˆ°æ–‡ä»¶ï¼‰ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸æ‰¿æ‹…å¤ªå¤šä»»åŠ¡æˆ–è´£ä»»ï¼Œå®¹æ˜“é«˜ä¼°è‡ªå·±çš„æ—¶é—´å’Œç²¾åŠ›ï¼Œä¸€ä¸‹å­ç­”åº”å¤ªå¤šäº‹æƒ…ï¼Œå¯¼è‡´æœ€åå¿™ä¸è¿‡æ¥ã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘éš¾ä»¥æŒ‰è®¡åˆ’æ‰§è¡Œæˆ–è¾¾æˆæ—¶é—´ç›®æ ‡ï¼Œæ¯”å¦‚åˆ—äº†è®¡åˆ’è¡¨ï¼Œä½†æ€»æ˜¯å®Œä¸æˆã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘éš¾ä»¥ç»´æŒè§„å¾‹çš„æ—¥å¸¸ä½œæ¯ï¼Œç¡è§‰ã€åƒé¥­ã€å·¥ä½œæ—¶é—´ç»å¸¸ä¸å›ºå®šã€‚",
            example: "",
            type: "executive",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨éœ€è¦é•¿æ—¶é—´åç€çš„æƒ…å†µä¸‹ä¼šæ„Ÿåˆ°ç„¦èºæˆ–ä¸è€çƒ¦, æ¯”å¦‚ä¸Šè¯¾ã€å¼€ä¼šæˆ–åè½¦æ—¶é—´å¤ªé•¿æ—¶å°±å¼€å§‹æ‰­åŠ¨èº«ä½“æˆ–æƒ³èµ·èº«æ´»åŠ¨ã€‚",
            example: "",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨è¿›è¡Œä¼‘é—²æ´»åŠ¨æ—¶ï¼Œå¾ˆéš¾å®‰é™ä¸‹æ¥ã€‚å³ä½¿æ˜¯çœ‹ä¹¦æˆ–çœ‹å‰§ï¼Œä¹Ÿä¼šæ—¶ä¸æ—¶æƒ³èµ·åˆ«çš„äº‹æˆ–åŠ¨æ¥åŠ¨å»ã€‚",
            example: "",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¸¸å¸¸æ„Ÿè§‰è‡ªå·±åƒè¢«é©¬è¾¾é©±åŠ¨ä¸€æ ·åœä¸ä¸‹æ¥ã€‚å³ä½¿æ²¡äº‹åšï¼Œä¹Ÿä¼šä¸»åŠ¨æ‰¾äº‹åšï¼Œä¸ç„¶å°±ä¼šç„¦è™‘ã€‚",
            example: "",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¸¸å¸¸åœ¨åˆ«äººè¿˜æ²¡è¯´å®Œæ—¶å°±è„±å£è€Œå‡ºå›ç­”æˆ–è¯„è®ºï¼Œæ€»å¿ä¸ä½æƒ³é©¬ä¸Šè¯´å‡ºè‡ªå·±çš„æƒ³æ³•ã€‚",
            example: "",
            type: "impulsivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¸¸å¸¸è¯´è¯è¿‡å¤šï¼Œå³ä½¿åœºåˆä¸åˆé€‚ã€‚æ¯”å¦‚åœ¨ä¸¥è‚ƒçš„ä¼šè®®ä¸Šä¹Ÿä¼šå¿ä¸ä½å¤šè¯´ä¸¤å¥ã€‚",
            example: "",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨ç­‰å¾…ç»“æœæˆ–å›åº”æ—¶ç»å¸¸æ„Ÿåˆ°å¼ºçƒˆçš„æ€¥èºæ„Ÿã€‚æ¯”å¦‚å‘æ¶ˆæ¯åæ€»æ˜¯å¿ä¸ä½åå¤æŸ¥çœ‹å¯¹æ–¹æ˜¯å¦å·²è¯»ï¼Œæˆ–è€…è€ƒè¯•æˆç»©å¿«å…¬å¸ƒäº†ä½†ä¸€ç›´æ²¡å‡ºæ—¶ï¼Œä¼šç‰¹åˆ«çƒ¦èºã€åç«‹ä¸å®‰ã€‚",
            example: "",
            type: "impulsivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨æ’é˜Ÿæˆ–å°ç»„è®¨è®ºç­‰å¾…å‘è¨€æ—¶æ„Ÿåˆ°éå¸¸ä¸è€çƒ¦ã€ç„¦èºï¼Œæƒ³å°½å¿«è½®åˆ°è‡ªå·±ã€‚",
            example: "",
            type: "impulsivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘æœ‰æ—¶ä¼šä¸é¡¾åæœåœ°å†²åŠ¨è¡Œäº‹ã€‚æ¯”å¦‚ä¸€æ—¶å†²åŠ¨ä¹°äº†ä¸éœ€è¦çš„ä¸œè¥¿ã€‚",
            example: "",
            type: "impulsivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘éœ€è¦é€šè¿‡èº«ä½“æ´»åŠ¨æ¥ä¿æŒä¸“æ³¨ã€‚æ¯”å¦‚è¾¹èµ°è¾¹æƒ³é—®é¢˜æ—¶åè€Œæ€è·¯ä¼šæ›´æ¸…æ™°ã€‚",
            example: "",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å¸¸å¸¸ä¸è‡ªè§‰åœ°è¸±æ­¥ã€æ•²æ‰“æˆ–åšé‡å¤åŠ¨ä½œã€‚",
            example: "",
            type: "hyperactivity",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å› ä¸ºè‡ªå·±è®¤ä¸ºçš„å¤±è´¥æˆ–é”™è¯¯è€Œæ„Ÿåˆ°è‡ªå‘, çŠ¯äº†ä¸€ç‚¹é”™å°±ä¼šåå¤è´£å¤‡è‡ªå·±ï¼Œè§‰å¾—è‡ªå·±ä¸å¤Ÿå¥½ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ä¼šç»å†å¼ºçƒˆä¸”éš¾ä»¥æ§åˆ¶çš„æƒ…ç»ªã€‚é‡åˆ°å°äº‹ä¹Ÿå®¹æ˜“æ¿€åŠ¨ã€ç”Ÿæ°”æˆ–æ²®ä¸§ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸åå¤å›æƒ³å‘ç”Ÿè¿‡çš„ç¤¾äº¤åœºæ™¯ï¼Œæ‹…å¿ƒè‡ªå·±è¯´é”™æˆ–åšé”™äº†ä»€ä¹ˆã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "å³ä½¿çŸ¥é“ä¸åº”è¯¥è¿™ä¹ˆåšï¼Œæˆ‘ä¹Ÿå¾ˆéš¾å…‹åˆ¶å†²åŠ¨æˆ–è¯±æƒ‘ã€‚æ¯”å¦‚æ˜çŸ¥é“è¯¥å·¥ä½œï¼Œå´å¿ä¸ä½å»åˆ·çŸ­è§†é¢‘ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨æƒ…ç»ªæ¿€åŠ¨æ—¶éš¾ä»¥æ‰¾åˆ°è®©è‡ªå·±å¹³é™çš„æ–¹æ³•ã€‚ç”Ÿæ°”æˆ–ç„¦è™‘æ—¶ä¼šè¶Šæƒ³è¶Šçƒ¦ï¼Œå¾ˆéš¾å†·é™ä¸‹æ¥ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘åœ¨é¢å¯¹æ‰¹è¯„æˆ–åé¦ˆæ—¶å®¹æ˜“å˜å¾—é˜²å¾¡ã€‚åˆ«äººä¸€æŒ‡å‡ºé—®é¢˜ï¼Œæˆ‘å°±è§‰å¾—è¢«å¦å®šã€æƒ³è§£é‡Šã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘éš¾ä»¥å¯Ÿè§‰ç¤¾äº¤æš—ç¤ºï¼Œæ¯”å¦‚åœ¨è®²æ•…äº‹æˆ–è¡¨è¾¾è§‚ç‚¹æ—¶ï¼Œå¯¹æ–¹å·²ç»å¼€å§‹æ•·è¡åœ°ç¬‘ã€çœ‹æ‰‹è¡¨ã€é¢‘ç¹åº”ä»˜ï¼Œä½†ä»ä¼šç»§ç»­è¯´ä¸‹å»ï¼Œæ²¡æœ‰å¯Ÿè§‰å‡ºå¯¹æ–¹å…¶å®æƒ³ç»“æŸè¯é¢˜ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "ç”±äºæ²Ÿé€šå›°éš¾ï¼Œæˆ‘æœ‰æ—¶æ„Ÿåˆ°ç¤¾äº¤å­¤ç«‹æˆ–æŒ«è´¥ã€‚æƒ³è¡¨è¾¾è‡ªå·±å´å¸¸è¢«è¯¯è§£ï¼Œè§‰å¾—æ²¡äººæ‡‚æˆ‘ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘å†…å¿ƒå¸¸å¸¸æ„Ÿåˆ°æŒç»­çš„ä¸å®‰æˆ–çƒ¦èºã€‚æ˜æ˜ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼Œå´è§‰å¾—å¿ƒé‡Œä¸€ç›´ä¸è¸å®ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ä»æŒ«æŠ˜æˆ–è´Ÿé¢ç»å†ä¸­æ¢å¤å¾—å¾ˆæ…¢ã€‚ä¸€æ—¦è¢«æ‰¹è¯„æˆ–å¤±è´¥ï¼Œä¼šå¿ƒæƒ…ä½è½å¾ˆä¹…ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘è§‰å¾—è‡ªå·±çš„å†²åŠ¨æœ‰æ—¶ä¼šè®©äººé™…å…³ç³»å˜å¾—ç´§å¼ ã€‚æƒ…ç»ªåŒ–åœ°å‘è„¾æ°”åï¼Œæœ‹å‹æˆ–åŒäº‹ä¼šç–è¿œæˆ‘ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "å› ä¸ºæƒ…ç»ªååº”å¼ºçƒˆï¼Œæˆ‘å¾ˆéš¾ç»´æŒè‰¯å¥½çš„äººé™…å…³ç³»ã€‚æ¯”å¦‚å¯¹å°è¯¯ä¼šååº”è¿‡åº¦ï¼Œè®©åˆ«äººè§‰å¾—éš¾ç›¸å¤„ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
          {
            text: "æˆ‘ç»å¸¸è§‰å¾—è‡ªå·±è¢«è¯¯è§£æˆ–ä¸è¢«è®¤å¯ï¼Œè§‰å¾—åˆ«äººä¸äº†è§£è‡ªå·±çš„åŠªåŠ›æˆ–æƒ³æ³•ã€‚",
            example: "",
            type: "emotional",
            options: [
              { text: "ä»ä¸", value: 0 },
              { text: "å¾ˆå°‘", value: 1 },
              { text: "æœ‰æ—¶", value: 2 },
              { text: "ç»å¸¸", value: 3 },
              { text: "æ€»æ˜¯", value: 4 },
            ],
          },
        ],
      };

      // ä¸»åº”ç”¨ç»„ä»¶
      function ADHDComplexTestApp() {
        const [currentPage, setCurrentPage] = useState("home");
        const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
        const [answers, setAnswers] = useState([]);
        const [results, setResults] = useState(null);
        const [randomizedQuestions, setRandomizedQuestions] = useState([]);
        const [originalIndexMap, setOriginalIndexMap] = useState([]);

        // éšæœºåŒ–é¢˜ç›®é¡ºåºçš„å‡½æ•°
        const shuffleArray = (array) => {
          const shuffled = [...array];
          for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }
          return shuffled;
        };

        const startTest = () => {
          // åˆ›å»ºå¸¦ç´¢å¼•çš„é¢˜ç›®æ•°ç»„
          const questionsWithIndex = testData.complex.map(
            (question, index) => ({
              ...question,
              originalIndex: index,
            })
          );

          // éšæœºåŒ–é¢˜ç›®
          const shuffled = shuffleArray(questionsWithIndex);
          setRandomizedQuestions(shuffled);

          // åˆ›å»ºåŸå§‹ç´¢å¼•æ˜ å°„
          const indexMap = shuffled.map((q) => q.originalIndex);
          setOriginalIndexMap(indexMap);

          setCurrentQuestionIndex(0);
          setAnswers(new Array(testData.complex.length).fill(null));
          setCurrentPage("test");
        };

        const selectAnswer = (value) => {
          const newAnswers = [...answers];
          // ä½¿ç”¨åŸå§‹ç´¢å¼•æ¥å­˜å‚¨ç­”æ¡ˆ
          const originalIndex = originalIndexMap[currentQuestionIndex];
          newAnswers[originalIndex] = value;
          setAnswers(newAnswers);

          // è‡ªåŠ¨è·³è½¬åˆ°ä¸‹ä¸€é¢˜ï¼ˆå»¶è¿Ÿ300msè®©ç”¨æˆ·çœ‹åˆ°é€‰æ‹©æ•ˆæœï¼‰
          setTimeout(() => {
            if (currentQuestionIndex < randomizedQuestions.length - 1) {
              setCurrentQuestionIndex(currentQuestionIndex + 1);
            }
          }, 300);
        };

        const nextQuestion = () => {
          if (currentQuestionIndex < randomizedQuestions.length - 1) {
            setCurrentQuestionIndex(currentQuestionIndex + 1);
          }
        };

        const previousQuestion = () => {
          if (currentQuestionIndex > 0) {
            setCurrentQuestionIndex(currentQuestionIndex - 1);
          }
        };

        const calculateResults = () => {
          const questions = testData.complex;
          let inattentionScore = 0;
          let hyperactivityScore = 0;
          let impulsivityScore = 0;
          let executiveScore = 0;
          let emotionalScore = 0;

          questions.forEach((question, index) => {
            const score = answers[index] || 0;
            switch (question.type) {
              case "inattention":
                inattentionScore += score;
                break;
              case "hyperactivity":
                hyperactivityScore += score;
                break;
              case "impulsivity":
                impulsivityScore += score;
                break;
              case "executive":
                executiveScore += score;
                break;
              case "emotional":
                emotionalScore += score;
                break;
            }
          });

          const totalScore =
            inattentionScore +
            hyperactivityScore +
            impulsivityScore +
            executiveScore +
            emotionalScore;

          setResults({
            total: totalScore,
            inattention: inattentionScore,
            hyperactivity: hyperactivityScore,
            impulsivity: impulsivityScore,
            executive: executiveScore,
            emotional: emotionalScore,
            maxScore: 168, // 42é¢˜ Ã— 4åˆ†
            maxInattentionScore: 28, // 7é¢˜ Ã— 4åˆ†
            maxHyperactivityScore: 24, // 6é¢˜ Ã— 4åˆ†
            maxImpulsivityScore: 16, // 4é¢˜ Ã— 4åˆ†
            maxExecutiveScore: 48, // 12é¢˜ Ã— 4åˆ†
            maxEmotionalScore: 52, // 13é¢˜ Ã— 4åˆ†
          });
          setCurrentPage("results");
        };

        const resetTest = () => {
          setCurrentPage("home");
          setCurrentQuestionIndex(0);
          setAnswers([]);
          setResults(null);
          setRandomizedQuestions([]);
          setOriginalIndexMap([]);
        };

        if (currentPage === "home") {
          return <HomePage onStartTest={startTest} />;
        } else if (currentPage === "test") {
          return (
            <TestPage
              questions={randomizedQuestions}
              currentQuestionIndex={currentQuestionIndex}
              answers={answers}
              originalIndexMap={originalIndexMap}
              onSelectAnswer={selectAnswer}
              onNextQuestion={nextQuestion}
              onPreviousQuestion={previousQuestion}
              onSubmitTest={calculateResults}
              onBackToHome={resetTest}
            />
          );
        } else {
          return <ResultsPage results={results} onBackToHome={resetTest} />;
        }
      }

      // ä¸»é¡µç»„ä»¶
      function HomePage({ onStartTest }) {
        return (
          <div className="container">
            <div className="hero-section">
              <div className="hero-content">
                <h1 className="hero-title">ADHD ä¸“ä¸šæ·±åº¦æµ‹è¯„</h1>
                <p className="hero-description">
                  åŸºäºå›½é™…æ ‡å‡†ä¸´åºŠé‡è¡¨è®¾è®¡çš„ä¸“ä¸šADHDæ·±åº¦è¯„ä¼°å·¥å…·ï¼Œ
                  ä»æ³¨æ„åŠ›ä¸ä¸“æ³¨å›°éš¾ã€æ‰§è¡ŒåŠŸèƒ½ä¸ç»„ç»‡èƒ½åŠ›ã€å†²åŠ¨ä¸å¤šåŠ¨å€¾å‘ã€æƒ…ç»ªä¸è‡ªæˆ‘è°ƒèŠ‚å›°éš¾å››ä¸ªæ ¸å¿ƒç»´åº¦å…¨é¢è¯„ä¼°æ‚¨çš„ADHDç—‡çŠ¶ç‰¹å¾ã€‚
                </p>

                <div className="test-info">
                  <div className="info-card">
                    <h3>ğŸ“Š å››ç»´åº¦ä¸“ä¸šè¯„ä¼°</h3>
                    <ul>
                      <li>æ³¨æ„åŠ›ä¸ä¸“æ³¨å›°éš¾</li>
                      <li>æ‰§è¡ŒåŠŸèƒ½ä¸ç»„ç»‡èƒ½åŠ›</li>
                      <li>å†²åŠ¨ä¸å¤šåŠ¨å€¾å‘</li>
                      <li>æƒ…ç»ªä¸è‡ªæˆ‘è°ƒèŠ‚å›°éš¾</li>
                    </ul>
                  </div>

                  <div className="info-card">
                    <h3>â±ï¸ æµ‹è¯„ä¿¡æ¯</h3>
                    <ul>
                      <li>é¢˜ç›®æ•°é‡ï¼š42é“</li>
                      <li>é¢„ä¼°æ—¶é—´ï¼š10-15åˆ†é’Ÿ</li>
                      <li>é€‚ç”¨å¹´é¾„ï¼š18å²ä»¥ä¸Šæˆäºº</li>
                      <li>è¯„åˆ†åˆ¶åº¦ï¼š5çº§è¯„åˆ†</li>
                    </ul>
                  </div>

                  <div className="info-card">
                    <h3>ğŸ¯ ç»“æœåˆ†æ</h3>
                    <ul>
                      <li>æ€»ä½“ADHDé£é™©è¯„ä¼°</li>
                      <li>å››ä¸ªç»´åº¦è¯¦ç»†åˆ†æ</li>
                      <li>å¯è§†åŒ–é›·è¾¾å›¾å±•ç¤º</li>
                      <li>ä¸“ä¸šå»ºè®®ä¸æŒ‡å¯¼</li>
                    </ul>
                  </div>
                </div>

                <button className="btn-primary" onClick={onStartTest}>
                  å¼€å§‹ä¸“ä¸šæ·±åº¦æµ‹è¯„
                </button>

                <div style={{ marginTop: "40px" }} className="disclaimer">
                  <p>
                    <strong>âš ï¸ é‡è¦æç¤ºï¼š</strong>
                  </p>
                  <p>
                    æ­¤æµ‹è¯„ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šåŒ»å­¦è¯Šæ–­ã€‚å¦‚æœ‰éœ€è¦ï¼Œè¯·å’¨è¯¢ä¸“ä¸šåŒ»ç–—æœºæ„ã€‚
                  </p>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // æµ‹è¯•é¡µé¢ç»„ä»¶
      function TestPage({
        questions,
        currentQuestionIndex,
        answers,
        originalIndexMap,
        onSelectAnswer,
        onNextQuestion,
        onPreviousQuestion,
        onSubmitTest,
        onBackToHome,
      }) {
        const currentQuestion = questions[currentQuestionIndex];
        const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
        const isLastQuestion = currentQuestionIndex === questions.length - 1;
        const allAnswered = answers.every((answer) => answer !== null);

        // è·å–å½“å‰é¢˜ç›®çš„åŸå§‹ç´¢å¼•å¯¹åº”çš„ç­”æ¡ˆ
        const currentOriginalIndex = originalIndexMap
          ? originalIndexMap[currentQuestionIndex]
          : currentQuestionIndex;
        const currentAnswer = answers[currentOriginalIndex];

        return (
          <div className="container">
            <div className="test-header">
              <button className="btn-back" onClick={onBackToHome}>
                â† è¿”å›é¦–é¡µ
              </button>
              <div className="progress-info">
                ç¬¬ {currentQuestionIndex + 1} é¢˜ / å…± {questions.length} é¢˜
              </div>
            </div>

            <div className="progress-container">
              <div className="progress-bar">
                <div
                  className="progress-fill"
                  style={{ width: `${progress}%` }}
                ></div>
              </div>
              <div className="progress-text">{Math.round(progress)}% å®Œæˆ</div>
            </div>

            <div className="test-content">
              <div className="question-card">
                <div className="question-number">
                  é—®é¢˜ <span>{currentQuestionIndex + 1}</span>
                </div>
                <h2 className="question-text">{currentQuestion.text}</h2>
                {currentQuestion.example && (
                  <div className="question-example">
                    <span className="example-label">ğŸ’¬ ä¾‹å¦‚ï¼š</span>
                    {currentQuestion.example}
                  </div>
                )}
                <div className="answer-options">
                  {currentQuestion.options.map((option, index) => (
                    <div
                      key={index}
                      className={`answer-option ${
                        currentAnswer === option.value ? "selected" : ""
                      }`}
                      onClick={() => onSelectAnswer(option.value)}
                    >
                      <input
                        type="radio"
                        name="answer"
                        value={option.value}
                        checked={currentAnswer === option.value}
                        onChange={() => {}}
                      />
                      <label>{option.text}</label>
                    </div>
                  ))}
                </div>
              </div>

              <div className="navigation-buttons">
                <button
                  className="btn-secondary"
                  onClick={onPreviousQuestion}
                  disabled={currentQuestionIndex === 0}
                >
                  ä¸Šä¸€é¢˜
                </button>
                <div className="button-spacer"></div>
                {isLastQuestion ? (
                  <button
                    className="btn-primary"
                    onClick={onSubmitTest}
                    disabled={!allAnswered}
                  >
                    æŸ¥çœ‹ç»“æœ
                  </button>
                ) : (
                  <button
                    className="btn-primary"
                    onClick={onNextQuestion}
                    disabled={
                      currentAnswer === null || currentAnswer === undefined
                    }
                  >
                    ä¸‹ä¸€é¢˜
                  </button>
                )}
              </div>
            </div>
          </div>
        );
      }

      // ç»“æœé¡µé¢ç»„ä»¶
      function ResultsPage({ results, onBackToHome }) {
        const [chartInstance, setChartInstance] = useState(null);

        useEffect(() => {
          createRadarChart();
          return () => {
            if (chartInstance) {
              chartInstance.destroy();
            }
          };
        }, [results]);

        const createRadarChart = () => {
          const canvas = document.getElementById("radarChart");
          if (!canvas) return;

          const ctx = canvas.getContext("2d");

          if (chartInstance) {
            chartInstance.destroy();
          }

          const data = {
            labels: [
              "æ³¨æ„åŠ›ä¸ä¸“æ³¨å›°éš¾",
              "æ‰§è¡Œä¸ç»„ç»‡å›°éš¾",
              "å†²åŠ¨ä¸å¤šåŠ¨å€¾å‘",
              "æƒ…ç»ªè°ƒèŠ‚å›°éš¾",
            ],
            datasets: [
              {
                label: "ADHDç»´åº¦è¯„ä¼°",
                data: [
                  (results.inattention / results.maxInattentionScore) * 100,
                  (results.executive / results.maxExecutiveScore) * 100,
                  ((results.hyperactivity + results.impulsivity) /
                    (results.maxHyperactivityScore +
                      results.maxImpulsivityScore)) *
                    100,
                  (results.emotional / results.maxEmotionalScore) * 100,
                ],
                backgroundColor: "rgba(113, 70, 221, 0.2)",
                borderColor: "#7146dd",
                borderWidth: 2,
                pointBackgroundColor: "#7146dd",
                pointBorderColor: "#fff",
                pointBorderWidth: 2,
                pointRadius: 6,
              },
            ],
          };

          const config = {
            type: "radar",
            data: data,
            options: {
              responsive: true,
              maintainAspectRatio: false,
              scales: {
                r: {
                  beginAtZero: true,
                  max: 100,
                  ticks: {
                    stepSize: 20,
                    callback: function (value) {
                      return value + "%";
                    },
                  },
                  grid: {
                    color: "rgba(0,0,0,0.1)",
                  },
                  pointLabels: {
                    font: {
                      size: window.innerWidth <= 480 ? 10 : 12,
                      weight: "bold",
                    },
                    padding: window.innerWidth <= 480 ? 12 : 18,
                    display: true,
                  },
                },
              },
              layout: {
                padding: {
                  top: window.innerWidth <= 480 ? 20 : 30,
                  right: window.innerWidth <= 480 ? 20 : 30,
                  bottom: window.innerWidth <= 480 ? 20 : 30,
                  left: window.innerWidth <= 480 ? 20 : 30,
                },
              },
              plugins: {
                legend: {
                  display: false,
                },
              },
            },
          };

          const newChart = new Chart(ctx, config);
          setChartInstance(newChart);
        };

        const getRiskLevel = (percentage) => {
          if (percentage >= 75) return { level: "é«˜é£é™©", class: "high-risk" };
          if (percentage >= 50)
            return { level: "ä¸­ç­‰é£é™©", class: "medium-risk" };
          if (percentage >= 25) return { level: "è½»åº¦é£é™©", class: "low-risk" };
          return { level: "ä½é£é™©", class: "minimal-risk" };
        };

        // è®¡ç®—åˆ†æç»“æœ
        const totalPercentage = (results.total / results.maxScore) * 100;
        const analysis = getComplexResultAnalysis(results, totalPercentage);
        const scoreInterpretation = getComplexScoreInterpretation(
          results.total,
          results.maxScore
        );
        const personalizedAnalysis = getComplexPersonalizedAnalysis(results);

        const dimensionResults = [
          {
            name: "æ³¨æ„åŠ›ä¸ä¸“æ³¨å›°éš¾",
            description: "ä¸“æ³¨åŠ›æŒä¹…æ€§ã€ç»†èŠ‚å…³æ³¨èƒ½åŠ›ã€ä»»åŠ¡å®Œæˆåº¦",
            score: results.inattention,
            maxScore: results.maxInattentionScore,
            percentage:
              (results.inattention / results.maxInattentionScore) * 100,
          },
          {
            name: "æ‰§è¡Œä¸ç»„ç»‡å›°éš¾",
            description: "è®¡åˆ’ç»„ç»‡èƒ½åŠ›ã€æ—¶é—´ç®¡ç†ã€ä»»åŠ¡åˆ‡æ¢çµæ´»æ€§",
            score: results.executive,
            maxScore: results.maxExecutiveScore,
            percentage: (results.executive / results.maxExecutiveScore) * 100,
          },
          {
            name: "å†²åŠ¨ä¸å¤šåŠ¨å€¾å‘",
            description: "èº«ä½“æ´»åŠ¨æ§åˆ¶ã€è¡Œä¸ºæŠ‘åˆ¶èƒ½åŠ›ã€å†²åŠ¨å†³ç­–æ§åˆ¶",
            score: results.hyperactivity + results.impulsivity,
            maxScore:
              results.maxHyperactivityScore + results.maxImpulsivityScore,
            percentage:
              ((results.hyperactivity + results.impulsivity) /
                (results.maxHyperactivityScore + results.maxImpulsivityScore)) *
              100,
          },
          {
            name: "æƒ…ç»ªè°ƒèŠ‚å›°éš¾",
            description: "æƒ…ç»ªç®¡ç†èƒ½åŠ›ã€ç¤¾äº¤æŠ€èƒ½ã€è‡ªæˆ‘è®¤çŸ¥ä¸è°ƒèŠ‚",
            score: results.emotional,
            maxScore: results.maxEmotionalScore,
            percentage: (results.emotional / results.maxEmotionalScore) * 100,
          },
        ];

        // è°ƒè¯•ä¿¡æ¯
        console.log("Dimension Results:", dimensionResults);
        dimensionResults.forEach((dim, index) => {
          console.log(
            `${dim.name}: ${dim.score}/${dim.maxScore} = ${dim.percentage}%`
          );
        });

        return (
          <div className="container">
            <div className="page active">
              <div className="result-header">
                <button className="btn-back" onClick={onBackToHome}>
                  â† é‡æ–°æµ‹è¯•
                </button>
              </div>

              <div className="result-content">
                <div className="result-card">
                  <div className="result-score">
                    <div className="score-card">
                      <div className="score-label">æµ‹è¯•æ€»åˆ†</div>
                      <div className="score-main">
                        <span className="current-score">{results.total}</span>
                        <span className="score-separator">/</span>
                        <span className="max-score">{results.maxScore}</span>
                      </div>
                      <div className="score-percentage">
                        {Math.round(totalPercentage)}%
                      </div>
                    </div>
                  </div>

                  <div className="result-level">
                    <h2 className="level-title">{analysis.level}</h2>
                    <p className="level-description">{analysis.description}</p>
                  </div>

                  <div className="result-details">
                    <h3>è¯¦ç»†åˆ†æ</h3>

                    <div className="score-interpretation">
                      <h4>åˆ†æ•°è§£è¯»</h4>
                      <div
                        className="interpretation-content"
                        dangerouslySetInnerHTML={{
                          __html: scoreInterpretation,
                        }}
                      ></div>
                    </div>

                    <div className="radar-chart-container">
                      <h4>å››ç»´åº¦é›·è¾¾å›¾åˆ†æ</h4>
                      <div className="chart-wrapper">
                        <canvas id="radarChart"></canvas>
                      </div>
                      <p className="chart-description">
                        é›·è¾¾å›¾å±•ç¤ºäº†æ‚¨åœ¨ADHDå››ä¸ªæ ¸å¿ƒç»´åº¦ä¸Šçš„è¡¨ç°æƒ…å†µï¼Œæ•°å€¼è¶Šé«˜è¡¨ç¤ºè¯¥ç»´åº¦çš„ç—‡çŠ¶è¶Šæ˜æ˜¾ã€‚
                      </p>
                    </div>

                    <div className="symptom-analysis">
                      {dimensionResults.map((dimension, index) => {
                        const risk = getRiskLevel(dimension.percentage);
                        return (
                          <div key={index} className="symptom-category">
                            <h4>{dimension.name}</h4>
                            <div className="symptom-score">
                              <span className="score-display">
                                {dimension.score} / {dimension.maxScore} åˆ†
                              </span>
                            </div>
                            <div className="score-bar">
                              <div
                                className="score-fill"
                                style={{
                                  width: `${Math.min(
                                    100,
                                    Math.max(0, dimension.percentage || 0)
                                  )}%`,
                                }}
                              ></div>
                            </div>
                            <div className="symptom-interpretation">
                              å¾—åˆ† {Math.round(dimension.percentage)}% -{" "}
                              {risk.level}
                              <br />
                              {dimension.description}
                            </div>
                          </div>
                        );
                      })}
                    </div>

                    <div className="personalized-analysis">
                      <h4>ä¸ªæ€§åŒ–åˆ†æ</h4>
                      <div
                        className="personalized-content"
                        dangerouslySetInnerHTML={{
                          __html: personalizedAnalysis,
                        }}
                      ></div>
                    </div>

                    <div className="recommendations">
                      <h4>ä¸“ä¸šå»ºè®®</h4>
                      <div
                        className="recommendation-content"
                        dangerouslySetInnerHTML={{
                          __html: analysis.recommendations,
                        }}
                      ></div>
                    </div>
                  </div>

                  <div className="result-actions">
                    <button className="btn-primary" onClick={onBackToHome}>
                      é‡æ–°æµ‹è¯•
                    </button>
                    <button
                      className="btn-secondary"
                      onClick={() => window.print()}
                    >
                      ä¿å­˜ç»“æœ
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      }

      // å¤æ‚ç‰ˆåˆ†æå‡½æ•°
      function getComplexResultAnalysis(results, totalPercentage) {
        if (totalPercentage <= 30) {
          return {
            level: "ä½é£é™©",
            description:
              "å½“å‰ç—‡çŠ¶è¡¨ç°è¾ƒè½»å¾®ï¼ŒæˆäººADHDçš„å¯èƒ½æ€§è¾ƒä½ã€‚æ‚¨åœ¨æ³¨æ„åŠ›ã€æ‰§è¡ŒåŠŸèƒ½ã€å†²åŠ¨æ§åˆ¶å’Œæƒ…ç»ªè°ƒèŠ‚æ–¹é¢åŸºæœ¬æ­£å¸¸ã€‚",
            recommendations: `
              <ul>
                <li>ä¿æŒè‰¯å¥½çš„å·¥ä½œå’Œç”Ÿæ´»ä¹ æƒ¯</li>
                <li>ä½¿ç”¨æ—¶é—´ç®¡ç†å·¥å…·æé«˜æ•ˆç‡</li>
                <li>å®šæœŸè¿›è¡Œä½“è‚²é”»ç‚¼ç¼“è§£å‹åŠ›</li>
                <li>ä¿è¯å……è¶³çš„ç¡çœ å’Œåˆç†çš„è¥å…»</li>
                <li>ç»§ç»­å…³æ³¨è‡ªæˆ‘çŠ¶æ€ï¼Œä¿æŒè‰¯å¥½çš„å¿ƒç†å¥åº·</li>
              </ul>
            `,
          };
        } else if (totalPercentage <= 60) {
          return {
            level: "ä¸­ç­‰é£é™©",
            description:
              "å­˜åœ¨ä¸€å®šç¨‹åº¦çš„ADHDç›¸å…³ç—‡çŠ¶ï¼Œå»ºè®®å…³æ³¨è¿™äº›ç—‡çŠ¶å¯¹æ—¥å¸¸ç”Ÿæ´»çš„å½±å“ï¼Œå¯è€ƒè™‘å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿè¿›è¡Œè¯„ä¼°ã€‚",
            recommendations: `
              <ul>
                <li><strong>å»ºè®®å’¨è¯¢ç²¾ç¥ç§‘åŒ»ç”Ÿæˆ–å¿ƒç†åŒ»ç”Ÿ</strong></li>
                <li>ä½¿ç”¨ä»»åŠ¡ç®¡ç†Appå’Œæé†’å·¥å…·</li>
                <li>åˆ›å»ºæ— å¹²æ‰°çš„å·¥ä½œç¯å¢ƒ</li>
                <li>å­¦ä¹ æ­£å¿µå†¥æƒ³å’Œæ”¾æ¾æŠ€å·§</li>
                <li>å»ºç«‹è§„å¾‹çš„æ—¥å¸¸ä½œæ¯</li>
                <li>ä¸å®¶äººæœ‹å‹åˆ†äº«æ‚¨çš„å›°æ‰°ï¼Œè·å¾—æ”¯æŒ</li>
                <li>è€ƒè™‘å‚åŠ ADHDç®¡ç†æŠ€èƒ½åŸ¹è®­</li>
              </ul>
            `,
          };
        } else {
          return {
            level: "é«˜é£é™©",
            description:
              "ç—‡çŠ¶è¡¨ç°æ˜æ˜¾ï¼Œå¼ºçƒˆå»ºè®®å’¨è¯¢ä¸“ä¸šåŒ»ç”Ÿè¿›è¡Œå…¨é¢è¯„ä¼°ã€‚æˆäººADHDå¦‚æœå¾—åˆ°é€‚å½“æ²»ç–—ï¼Œå¯ä»¥æ˜¾è‘—æ”¹å–„ç”Ÿæ´»è´¨é‡ã€‚",
            recommendations: `
              <ul>
                <li><strong>è¯·å°½å¿«å’¨è¯¢ç²¾ç¥ç§‘åŒ»ç”Ÿè¿›è¡Œä¸“ä¸šè¯„ä¼°</strong></li>
                <li>å‡†å¤‡è¯¦ç»†çš„ç—‡çŠ¶å†å²å’ŒåŠŸèƒ½å½±å“è®°å½•</li>
                <li>äº†è§£æˆäººADHDçš„æ²»ç–—é€‰é¡¹ï¼ˆè¯ç‰©å’Œéè¯ç‰©æ²»ç–—ï¼‰</li>
                <li>è€ƒè™‘è®¤çŸ¥è¡Œä¸ºæ²»ç–—(CBT)ç­‰å¿ƒç†æ²»ç–—</li>
                <li>å¯»æ‰¾ADHDæ”¯æŒå°ç»„æˆ–åœ¨çº¿ç¤¾åŒº</li>
                <li>å­¦ä¹ ADHDç®¡ç†ç­–ç•¥å’Œç”Ÿæ´»æŠ€èƒ½</li>
                <li>å‘é›‡ä¸»äº†è§£å·¥ä½œåœºæ‰€çš„åˆç†è°ƒæ•´æ”¿ç­–</li>
                <li>åˆ¶å®šä¸ªäººåŒ–çš„ç—‡çŠ¶ç®¡ç†è®¡åˆ’</li>
              </ul>
            `,
          };
        }
      }

      function getComplexScoreInterpretation(total, maxScore) {
        const percentage = Math.round((total / maxScore) * 100);

        let interpretation = `<p><strong>æ‚¨çš„æ€»åˆ†ä¸º ${total} åˆ†ï¼ˆæ»¡åˆ† ${maxScore} åˆ†ï¼‰ï¼Œå æ€»åˆ†çš„ ${percentage}%</strong></p>`;

        interpretation += `
          <div class="score-ranges">
            <div class="score-range ${
              total <= Math.round(maxScore * 0.3) ? "current" : ""
            }">
              <span class="range">0-${Math.round(maxScore * 0.3)}åˆ†</span>
              <span class="level low-risk">ä½é£é™©</span>
              <span class="desc">ç—‡çŠ¶è½»å¾®ï¼ŒADHDå¯èƒ½æ€§è¾ƒä½</span>
            </div>
            <div class="score-range ${
              total > Math.round(maxScore * 0.3) &&
              total <= Math.round(maxScore * 0.6)
                ? "current"
                : ""
            }">
              <span class="range">${
                Math.round(maxScore * 0.3) + 1
              }-${Math.round(maxScore * 0.6)}åˆ†</span>
              <span class="level medium-risk">ä¸­ç­‰é£é™©</span>
              <span class="desc">å­˜åœ¨æ˜æ˜¾ç—‡çŠ¶ï¼Œå»ºè®®ä¸“ä¸šè¯„ä¼°</span>
            </div>
            <div class="score-range ${
              total > Math.round(maxScore * 0.6) ? "current" : ""
            }">
              <span class="range">${
                Math.round(maxScore * 0.6) + 1
              }-${maxScore}åˆ†</span>
              <span class="level high-risk">é«˜é£é™©</span>
              <span class="desc">ç—‡çŠ¶æ˜¾è‘—ï¼Œå¼ºçƒˆå»ºè®®å°±åŒ»</span>
            </div>
          </div>
        `;

        return interpretation;
      }

      function getComplexPersonalizedAnalysis(results) {
        let analysis = [];

        // æ‰¾å‡ºæœ€çªå‡ºçš„ç»´åº¦
        const dimensions = [
          {
            name: "æ³¨æ„åŠ›ä¸ä¸“æ³¨å›°éš¾",
            score: results.inattention,
            max: results.maxInattentionScore,
          },
          {
            name: "æ‰§è¡Œä¸ç»„ç»‡å›°éš¾",
            score: results.executive,
            max: results.maxExecutiveScore,
          },
          {
            name: "å†²åŠ¨ä¸å¤šåŠ¨å€¾å‘",
            score: results.hyperactivity + results.impulsivity,
            max: results.maxHyperactivityScore + results.maxImpulsivityScore,
          },
          {
            name: "æƒ…ç»ªè°ƒèŠ‚å›°éš¾",
            score: results.emotional,
            max: results.maxEmotionalScore,
          },
        ];

        const percentages = dimensions.map((d) => ({
          ...d,
          percentage: (d.score / d.max) * 100,
        }));
        const sortedDimensions = percentages.sort(
          (a, b) => b.percentage - a.percentage
        );

        const highest = sortedDimensions[0];
        const lowest = sortedDimensions[3];

        if (highest.percentage >= 60) {
          analysis.push(
            `<span class="highlight">${
              highest.name
            }</span>æ˜¯æ‚¨æœ€çªå‡ºçš„è¡¨ç°ï¼Œå¾—åˆ†è¾¾åˆ°${Math.round(
              highest.percentage
            )}%ï¼Œè¿™å¯èƒ½å¯¹æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»äº§ç”Ÿæ˜¾è‘—å½±å“ã€‚`
          );
        } else if (highest.percentage >= 40) {
          analysis.push(
            `<span class="highlight">${
              highest.name
            }</span>æ˜¯ç›¸å¯¹çªå‡ºçš„ç»´åº¦ï¼Œå¾—åˆ†ä¸º${Math.round(
              highest.percentage
            )}%ï¼Œéœ€è¦ç‰¹åˆ«å…³æ³¨ã€‚`
          );
        }

        if (highest.percentage - lowest.percentage >= 30) {
          analysis.push(
            `æ‚¨åœ¨ä¸åŒç»´åº¦ä¸Šçš„è¡¨ç°<span class="highlight">å·®å¼‚è¾ƒå¤§</span>ï¼Œ${highest.name}æ˜æ˜¾é«˜äº${lowest.name}ï¼Œè¿™ç§ä¸å‡è¡¡çš„æ¨¡å¼æœ‰åŠ©äºåˆ¶å®šé’ˆå¯¹æ€§çš„ç®¡ç†ç­–ç•¥ã€‚`
          );
        } else {
          analysis.push(
            `æ‚¨åœ¨å››ä¸ªç»´åº¦ä¸Šçš„è¡¨ç°<span class="highlight">ç›¸å¯¹å‡è¡¡</span>ï¼Œè¿™è¡¨æ˜æ‚¨å¯èƒ½éœ€è¦å…¨é¢çš„ç®¡ç†æ–¹æ³•ã€‚`
          );
        }

        // åŠŸèƒ½å½±å“è¯„ä¼°
        const totalPercentage = (results.total / results.maxScore) * 100;
        if (totalPercentage > 60) {
          analysis.push(
            `è¿™äº›ç—‡çŠ¶å¾ˆå¯èƒ½å·²ç»å¯¹æ‚¨çš„å·¥ä½œã€å­¦ä¹ æˆ–äººé™…å…³ç³»é€ æˆäº†<span class="highlight">æ˜¾è‘—å½±å“</span>ï¼Œå»ºè®®å¯»æ±‚ä¸“ä¸šæ”¯æŒã€‚`
          );
        } else if (totalPercentage > 30) {
          analysis.push(
            `è¿™äº›ç—‡çŠ¶å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹å¯¹æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»é€ æˆ<span class="highlight">ä¸€å®šå½±å“</span>ï¼Œé€‚å½“çš„ç­–ç•¥è°ƒæ•´ä¼šæœ‰å¸®åŠ©ã€‚`
          );
        }

        return analysis.join("<br><br>");
      }

      // æ¸²æŸ“åº”ç”¨
      ReactDOM.render(<ADHDComplexTestApp />, document.getElementById("root"));
    </script>
  </body>
</html>
